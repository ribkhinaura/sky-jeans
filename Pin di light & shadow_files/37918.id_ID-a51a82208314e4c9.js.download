"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["37918"],{307595:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoEndCard_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};r.hash="e04be51b4be0a2585e7803d004fa83b7",t.default=r},60533:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoNonDuplo_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoEndCard_pin"},{args:null,kind:"FragmentSpread",name:"VideoWithContextLogging_pin"},{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};r.hash="53ae9ecd15f057f744460205e5d495fd",t.default=r},35312:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinBlock_pin",selections:[{args:null,kind:"FragmentSpread",name:"StoryPinStickerBlockCloseup_pin"}],type:"Pin",abstractKey:null};r.hash="8bb1bb1f7bafeed0fe43bed44ef12d2a",t.default=r},303965:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"StoryPinStickerBlockCloseup_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};r.hash="7e8d917850c8329247291df0d281a59b",t.default=r},111419:function(e,t,n){n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateImageContainerDimension_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"}],type:"Pin",abstractKey:null};r.hash="86a6c49cecdb70d77f786a1965756cf9",t.default=r},331047:function(e,t,n){n.r(t);var r,o,i,a,l=(r={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a=[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null}],storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin",selections:[{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[r,o],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:i,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},o,{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"UserWebsite",kind:"LinkedField",name:"linkUserWebsite",plural:!1,selections:a,storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"price",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"standardPrice",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null});l.hash="b2a27d44d1f3dbd42301b82866212272",t.default=l},707915:function(e,t,n){var r=n(586659),o=n(20256),i=n(601686),a=n(382718);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.Z=(0,r.forwardRef)(function(e,t){var n,u=e.accessibilityLabel,s=e.handleClick,c=e.icon,d=e.iconColor,p=e.iconOnly,f=e.testId,m=e.buttonText,h=e.tabIndex,y=e.bgColor,g=e.isActive,v=function(e){if(Array.isArray(e))return e}(n=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{for(i=(n=n.call(e)).next;!(u=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n,2)||function(e,t){if(e){if("string"==typeof e)return l(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,2):void 0}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),b=v[0],_=v[1],P=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,function(){return P.current});var x=(0,i.x4)().setAbortNoActionPlacementTimeout,S=function(){_(function(e){return!e}),s(),x(!0)},w=function(e){var t;P&&e.target instanceof Element&&!(null!=(t=P.current)&&t.contains(e.target))&&_(!1)};return(0,r.useEffect)(function(){return window.addEventListener("mousedown",w),function(){window.removeEventListener("mousedown",w)}},[]),(0,r.useEffect)(function(){void 0!==g&&_(g)},[g]),(0,a.jsx)(o.xu,{"data-test-id":f||"closeup-action-bar-button",children:(0,a.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(o.hU,{ref:P,accessibilityLabel:u,bgColor:y,icon:c,iconColor:d||"darkGray",onClick:S,selected:b,size:p?"md":"lg",tabIndex:h}),m&&(0,a.jsx)(o.iP,{onTap:S,rounding:2,children:(0,a.jsx)(o.X6,{color:"light",overflow:"normal",size:"400",children:m})})]})})})},856782:function(e,t,n){n.d(t,{S:function(){return r}});var r=1e3;t.Z=3},112931:function(e,t,n){n.d(t,{ZP:function(){return y},GJ:function(){return h}});var r,o=n(586659);n(872555);var i=n(592821),a=n(979904),l=n(139707),u=n(974297),s=n(28427),c=n(611499),d=n(601686);function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=(void 0!==r||(r=n(111419)).hash&&"86a6c49cecdb70d77f786a1965756cf9"!==r.hash&&console.error("The definition of 'useCalculateImageContainerDimension_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function h(e,t){return"".concat(Math.floor(e/t*1e4)/1e4," / 1")}function y(e){var t=e.carouselData,n=e.imageToDisplayWidthRatio,r=void 0===n?1:n,f=e.mainImage,h=void 0===f?{width:1,height:1,url:""}:f,y=e.maxCloseupImageWidth,g=e.pinKey,v=e.shouldPadImage,b=void 0!==v&&v,_=(0,s.Z)(m,g),P=(0,d.x4)(),x=P.peekCloseupEnabled,S=P.viewportSize,w=(0,i.Re)().numericValues,O=(0,a.Z)({pinKey:_}).maxHeight,j=null!=w?w:{},E=j.fiftyPercentHeight,C=j.fiftyPercentWidth,T=j.maxHeight,A=j.maxWidth,I=(0,l.Z)(h).peekRedesignFastFollowsEnabled;return(0,o.useMemo)(function(){var e,n,o,i,a,l,s,d=y-c.d2,f=Math.min(b?d:y,null!=A?A:1/0,null!=C?C:1/0),m=(n=[h].concat(p((null==t||null==(e=t.carousel_slots)?void 0:e.map(function(e){var t,n,r,o,i,a;return(0,u.Z)(e.images)||((n=null==(t=e.videos)?void 0:t.video_list)?null!=(r=n.V_720P)&&r.url?n.V_720P:null!=(o=n.V_HLSV4)&&o.url?n.V_HLSV4:null!=(i=n.V_HLSV3_MOBILE)&&i.url?n.V_HLSV3_MOBILE:null!=(a=n.V_HLSV3_WEB)&&a.url?n.V_HLSV3_WEB:null:null)}).filter(function(e){return!!e}))||[])).map(function(e){var t=e.width,n=e.height;return(null!=t?t:1)/(null!=n?n:1)}),Math.min.apply(Math,p(n))),g=Math.floor(f*(t?r:1)/m),v="sm"===S?E:T;s=x?null!=v?v:g:"number"==typeof O?O:g;var _=I?void 0:s,P=_?Math.min(g,_):g,w=Math.min(f*(x?P/g:1),null!=A?A:1/0,null!=C?C:1/0),j=((a=(null==h?void 0:h.width)/h.height)>(l=w/P)?(o=w,i=w/a):(o=P*a,i=P),{containerAspectRatio:l,letterBoxedWidth:o,letterBoxedHeight:i}),k=j.containerAspectRatio,R=j.letterBoxedWidth,M=j.letterBoxedHeight;return{containerAspectRatio:k,containerHeight:P,containerWidth:w,horizontalOffset:(w-R)/2,letterBoxedHeight:M,letterBoxedWidth:R,letterBoxAspectRatio:R/M,verticalOffset:(P-M)/2}},[y,b,h,t,r,S,E,T,x,O,I,A,C])}},899117:function(e,t){t.Z=function(e,t){var n,r=t||{},o=r.height,i=r.width;switch(e){case"enabled_15":n=.15;break;case"enabled_25":n=.25;break;default:n=.35}return(void 0===i?0:i)/(void 0===o?0:o)<n}},179639:function(e,t,n){n.d(t,{Z:function(){return w}});var r=n(586659),o=n(20256),i=n(592821),a=n(979904),l=n(869985),u=n(980787),s=n(19585),c=n(399806),d=n(218831),p=n(601686),f=n(382718);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var S=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&g(i,e);var t,n,r=(t=b(),function(){var e,n=_(i);return e=t?Reflect.construct(n,arguments,_(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function i(){var e;if(!(this instanceof i))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return P(v(e=r.call.apply(r,[this].concat(n))),"startAudiblePlayTime",e.props.muted?null:new Date),e}return n=[{key:"componentDidUpdate",value:function(e){e.muted!==this.props.muted&&(this.startAudiblePlayTime=this.props.muted?null:new Date)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.musicRecordingId,n=e.muted,r=e.pinId,o=e.video;if(t&&!n&&this.startAudiblePlayTime&&Date.now()-this.startAudiblePlayTime.getTime()>=2e3){var i,a,l,u,s,d,p,f=(0,c.Z)({vEXP3:null==(i=o.video_list)?void 0:i.V_EXP3,vEXP4:null==(a=o.video_list)?void 0:a.V_EXP4,vEXP5:null==(l=o.video_list)?void 0:l.V_EXP5,vEXP6:null==(u=o.video_list)?void 0:u.V_EXP6,vEXP7:null==(s=o.video_list)?void 0:s.V_EXP7,v720P:null==(d=o.video_list)?void 0:d.V_720P,vHLSV3MOBILE:null==(p=o.video_list)?void 0:p.V_HLSV3_MOBILE})||{},m=f.hlsv3,h=f.mp4||m,y=(null==h?void 0:h.duration)||0;this.props.logContextEvent({event_type:8999,object_id_str:t,aux_data:{pin_id:r,story_pin_music_duration:y}})}}},{key:"render",value:function(){var e,t,n,r,i,a,u,s,d,p=this.props,m=p.activePageIndex,h=p.aspectRatio,y=p.blockHeight,g=p.blockWidth,v=p.closeupBodyWidth,b=p.closeupStoryPinViewability,_=p.closeupWithinMasonryEnabled,P=p.customEndCard,x=p.isPlaying,S=p.muted,w=p.onEnded,O=p.onUpdateVideoInfo,j=p.pageIndex,E=p.pin,C=p.pinId,T=p.maxHeight,A=p.video,I=p.videoThumbnailStartTime,k=null!=(e=(0,c.Z)({vEXP3:null==(t=A.video_list)?void 0:t.V_EXP3,vEXP4:null==(n=A.video_list)?void 0:n.V_EXP4,vEXP5:null==(r=A.video_list)?void 0:r.V_EXP5,vEXP6:null==(i=A.video_list)?void 0:i.V_EXP6,vEXP7:null==(a=A.video_list)?void 0:a.V_EXP7,v720P:null==(u=A.video_list)?void 0:u.V_720P,vHLSV3MOBILE:null==(s=A.video_list)?void 0:s.V_HLSV3_MOBILE}))?e:{},R=k.hlsv3,M=k.mp4,D=M||R;if(!D)return null;var L=D.height,F=D.thumbnail,z=D.width,V=null!=h?h:(null!=z?z:1)/(null!=L?L:1),B={height:"100%",left:"0",top:"0",width:"100%"},Z=_&&v?(null!=v?v:g)/(null!=(d=Number(T))?d:y):g/y;if(!_&&Math.abs(Z-V)>.01){if(Z<V){var G=100*V/Z;B.width="".concat(G,"%"),B.left="-".concat((G-100)/2,"%")}else if(Z>V){var H=100*Z/V;B.height="".concat(H,"%"),B.top="-".concat((H-100)/2,"%")}}var N="number"==typeof m&&j<=m+3;return(0,f.jsx)(o.xu,{height:"100%",overflow:"hidden",position:"relative",width:"100%",children:(0,f.jsx)(o.xu,{height:"100%",position:"absolute",width:"100%",children:N||x||I?(0,f.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:B},position:"absolute",children:(0,f.jsx)(l.Z,{aspectRatio:_?Z:h,autoplay:x,closeupStoryPinViewability:b,contextLogData:{component:0===j?227:228,element:10957,objectId:C,story_pin_page_id:j,view:3,viewParameter:157},customEndCard:P,customThumbnail:F,isPromoted:!1,loop:!1,muted:S,objectFit:M?_?"contain":"cover":void 0,onEnded:function(){w&&w(j)},onTimeChange:function(e){var t=e.time;O&&"number"==typeof D.duration&&D.duration>0&&O({currentTime:t,duration:D.duration/1e3})},pinId:C,pinKey:null===E?null:{type:"Legacy",data:E},preferMp4:!!M,showControls:"hover",variant:"storyPin",video:{id:A.id,hlsv3:R,mp4:M},videoThumbnailStartTime:I})}):F&&(0,f.jsx)(o.Ee,{alt:this.props.i18n.bt("Gambar sampul video", "Video cover image", "closeup.storyPin.videoCover", undefined, true),fit:"cover",naturalHeight:null!=L?L:1,naturalWidth:null!=z?z:1,src:F})})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),i}(r.PureComponent);function w(e){var t=(0,u.u)().logContextEvent,n=e.pin,r=(0,s.Z)(),o=(0,p.x4)().closeupWithinMasonryEnabled,l=(0,d.K)().closeupBodyWidth,c=(0,i.Re)().maxHeight,m=(0,a.Z)({pinKey:null===n?null:{type:"Legacy",data:n}}).maxHeight;return(0,f.jsx)(S,y(y({},e),{},{closeupBodyWidth:l,closeupWithinMasonryEnabled:o,i18n:r,logContextEvent:t,maxHeight:o?m:c}))}},248762:function(e,t,n){n.d(t,{Z:function(){return ec}}),n(492996);var r,o,i=n(20256),a=n(112931),l=n(592821),u=n(797902),s=n(883817),c=n(980787),d=n(886981),p=n(382718),f=function(e){var t=e.block,n=t.block_style,r=(n=void 0===n?{}:n).height,o=n.width,a=n.x_coord,f=n.y_coord,m=n.rotation,h=t.original_comment_id,y=e.horizontalOffset,g=e.pageAspectRatio,v=e.scaleFactor,b=e.verticalOffset,_=(0,c.u)().logContextEvent,P=l._B/g,x=(void 0===o?0:o)*l._B*v/100,S=(void 0===r?0:r)*P*v/100,w=(void 0===a?0:a)*l._B*v/100+(void 0===y?0:y),O=(void 0===f?0:f)*P*v/100+(void 0===b?0:b),j=(0,u.s0)(),E=(0,d.Z)({name:"AggregatedCommentResource",options:{commentId:h,field_set_key:"comment_reply_sticker"}}).data;return(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{left:w,top:O,transform:"rotate(".concat(void 0===m?0:m,"deg)")}},display:"flex",height:S,margin:-1,padding:1,position:"absolute",rounding:2,width:x,zIndex:s.B_,children:(0,p.jsx)(i.iP,{onTap:function(){_({event_type:102,view_type:1,component:227,element:12541,aux_data:{comment_id:h}}),null!=E&&E.pin_id&&j("/pin/".concat(E.pin_id,"/comments/").concat(h||""))},rounding:"pill"})})},m=n(291892),h=n(7525);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var g=["src","fallbackSrc"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e){var t=e.src,n=e.fallbackSrc,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,g),o=(0,h.Z)(t);return(0,p.jsx)(m.Z,b(b({},r),{},{src:o?t:n}))}var P=n(581722);function x(e){var t=e.isUseCache,n=e.signature;return(0,P.v9)(function(e){var r=e.pinbuilder.storyPinItemBlocks;if(!t)return null;for(var o=0,i=Object.keys(r);o<i.length;o++){var a,l,u=i[o];if((null==(a=r[u].media)?void 0:a.signatureEdited)===n||(null==(l=r[u].media)?void 0:l.signature)===n)return r[u]}return null})}var S=n(586659),w=n(111923),O=n(865540),j=n(982166),E=n(19585),C=n(542092);function T(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){var t,n=e.aggregatedCommentId,r=e.onDismiss,o=(0,E.Z)(),a=(0,O.Z)(),l=(0,w.Z)(),u=function(e){if(Array.isArray(e))return e}(t=(0,S.useState)(""))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{for(i=(n=n.call(e)).next;!(u=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return A(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=u[0],c=u[1],d=(0,p.jsx)(i.kC,{justifyContent:"end",children:(0,p.jsx)(i.zx,{color:"red",disabled:!s,onClick:function(){var e;(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({fromUnifiedComment:!0,objectType:C.o.aggregatedComment,objectId:n,tags:"[]",text:s});case 2:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){T(i,r,o,a,l,"next",e)}function l(e){T(i,r,o,a,l,"throw",e)}a(void 0)})})(),r()},text:o.bt("Posting", "Post", "ideapin.questionsticker.replymodal.postbutton", undefined, true)})});return(0,p.jsx)(j.ZP,{accessibilityModalLabel:"reply to creator Q and A question",align:"start",footer:d,heading:o.bt("Balas", "Reply", "ideapin.questionsticker.replymodal", undefined, true),onDismiss:r,children:(0,p.jsx)(i.xu,{paddingX:8,paddingY:1,children:(0,p.jsx)(i.Kx,{id:"ideaPinQuestionStickerReplyModalTextArea",onChange:function(e){c(e.value)},placeholder:a?o.bt("Balasan Anda akan muncul sebagai komentar publik pada Pin ini.", "Your reply will show up as a public comment on this Pin.", "pin.questionsticker.replymodal.placeholder", undefined, true):o.bt("Balasan Anda akan muncul sebagai komentar publik pada Pin Ide ini.", "Your reply will show up as a public comment on this Idea Pin.", "ideapin.questionsticker.replymodal.placeholder", undefined, true),value:s})})})},k=n(744862),R=n(821342),M=n(28427),D=n(302148),L=n(123317),F=n(294711);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=(void 0!==r||(r=n(303965)).hash&&"7e8d917850c8329247291df0d281a59b"!==r.hash&&console.error("The definition of 'StoryPinStickerBlockCloseup_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function Z(e){var t,n=e.block,r=e.elementType,o=e.horizontalOffset,a=e.onFlyoutOpen,f=e.pageAspectRatio,m=e.pageIndex,h=e.pinKey,y=e.scaleFactor,g=e.tooltipElementType,v=e.verticalOffset,b=e.videoPinProgress,_=(0,c.u)().logContextEvent,P=z((0,S.useState)(!1),2),x=P[0],w=P[1],O=z((0,S.useState)(!1),2),j=O[0],C=O[1],T=(0,S.useRef)(null),A=(0,u.s0)(),V=(0,E.Z)(),Z=(0,M.Z)(B,h),G=(0,R.Z)(),H=n.block_style,N=(H=void 0===H?{}:H).height,W=H.width,U=H.x_coord,K=H.y_coord,X=H.rotation,q=n.end_time,$=n.error_message,J=n.interactive_sticker_type,Y=void 0===J?null:J,Q=n.is_removed,ee=n.is_valid,et=n.start_time,en=n.sticker_data,er=n.type,eo=null==Z?void 0:Z.entityId,ei=en||{},ea=ei.board_id,el=ei.question_comment_id,eu=null!=(t=n.user)?t:{},es=eu.image_small_url,ec=eu.full_name,ed=eu.username,ep=null,ef=ee&&5===Y&&!!ea,em=ee&&7===Y&&!!el,eh=(0,d.Z)(ea&&ef?{name:"BoardResource",options:{field_set_key:"tagged_board_preview",board_id:ea}}:null),ey=eh.data||{},eg=ey.is_collaborative,ev=ey.pin_count,eb=ey.url;er===L.h8.PRODUCT_STICKER?ep=eo?"/pin/".concat(eo,"/"):"/":er===L.h8.MENTION_STICKER?ep="/".concat(void 0===ed?"":ed,"/"):ef&&(ep=eh.isLoaded?"".concat(eb):null);var e_=l._B/f,eP=(void 0===W?0:W)*l._B*y/100,ex=(void 0===N?0:N)*e_*y/100,eS=(void 0===U?0:U)*l._B*y/100+(void 0===o?0:o),ew=(void 0===K?0:K)*e_*y/100+(void 0===v?0:v),eO=(b||{}).currentTime,ej=!(0,F.Z)({currentTime:eO,endTime:q,startTime:et}),eE=function(){_({event_type:123,component:228,element:g,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:m}}),w(!1)},eC=function(e){var t=e.event;_({event_type:120,component:228,element:g,view_type:3,view_parameter:157,aux_data:{error_message:!ee&&$?$:null,story_pin_page_id:m}}),w(!0),a&&(t.stopPropagation(),a())};(0,S.useEffect)(function(){return document.addEventListener("scroll",function(){w(!1)}),function(){return document.removeEventListener("scroll",function(){w(!1)})}},[]);var eT=function(){var e=null,t=G.isAuth?null==G?void 0:G.avatar_color_index:void 0;switch(er){case L.h8.PRODUCT_STICKER:var n=Z||{},r=n.gridTitle,o=n.imageSpec_236x,a=n.richSummary,l=n.description,u=a||{},s=u.displayName,c=((u.products||[])[0]||{}).offerSummary||{},d=c||{},f=d.price,m=d.maxPrice,h=!!c&&(!!f||!!m),y=s||r||l;e=(0,p.jsxs)(S.Fragment,{children:[(0,p.jsx)(i.xu,{flex:"none",children:(0,p.jsx)(i.zd,{height:40,rounding:3,wash:!0,width:40,children:(null==o?void 0:o.url)&&(0,p.jsx)(i.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:o.url})})}),(0,p.jsx)(i.xu,{flex:"grow",paddingX:2,children:h?(0,p.jsxs)(i.kC,{alignContent:"center",alignItems:"stretch",direction:"column",flex:"grow",justifyContent:"center",children:[(0,p.jsx)(i.xv,{color:"shopping",lineClamp:1,size:"100",weight:"bold",children:f}),(0,p.jsx)(i.xv,{lineClamp:1,size:"100",children:y})]}):(0,p.jsx)(i.xv,{lineClamp:1,size:"100",children:y})}),(0,p.jsx)(i.xu,{flex:"none",children:(0,p.jsx)(i.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case L.h8.MENTION_STICKER:e=(0,p.jsxs)(S.Fragment,{children:[(0,p.jsx)(i.xu,{flex:"none",children:(0,p.jsx)(k.qE,{color:t,name:null!=ec?ec:"",size:"sm",src:null!=es?es:void 0})}),(0,p.jsx)(i.xu,{flex:"grow",paddingX:2,children:(0,p.jsx)(i.xv,{lineClamp:1,size:"200",weight:"bold",children:ec})}),(0,p.jsx)(i.xu,{flex:"none",children:(0,p.jsx)(i.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]});break;case L.h8.GENERIC_STICKER:e=[5].includes(Y)?ee?eh.isLoaded?(0,p.jsxs)(S.Fragment,{children:[(0,p.jsxs)(i.xu,{flex:"grow",paddingX:2,children:[(0,p.jsx)(i.xv,{lineClamp:1,size:"100",weight:"bold",children:eg?V.bt("Jelajahi papan kelompok ini", "Explore this group board", "closeup.StoryPin.stickerBlock.boardSticker.clickLabel", undefined, true):V.bt("Jelajahi papan ini", "Explore this board", "closeup.StoryPin.stickerBlock.boardSticker.clickLabel", undefined, true)}),(0,p.jsx)(i.xv,{size:"100",children:(!!ev||0===ev)&&(0,D.nk)(V.nbt(["{{ pinCount }} Pin"], ev, "closeup.StoryPin.stickerBlock.boardSticker.boardLabel", true),{pinCount:ev})})]}),(0,p.jsx)(i.xu,{flex:"none",children:(0,p.jsx)(i.Sj,{bgColor:"transparent",icon:"arrow-forward",iconColor:"darkGray",size:"xs"})})]}):(0,p.jsxs)(i.xu,{alignItems:"center",direction:"row",display:"flex",flex:"grow",paddingY:2,children:[(0,p.jsx)(i.xu,{marginEnd:1,paddingX:2,children:(0,p.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"100",children:V.bt("Memuat papan ...", "Loading board...", "closeup.StoryPin.stickerBlock.boardSticker.loadingText", undefined, true)})}),(0,p.jsx)(i.xH,{accessibilityLabel:V.bt("Papan sedang memuat", "Board is loading", "closeup.StoryPin.stickerBlock.boardSticker.loadingSpinnerText", undefined, true),show:!0,size:"sm"})]}):(0,p.jsx)(i.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:$})}):(0,p.jsx)(i.xu,{paddingX:2,paddingY:2,children:(0,p.jsx)(i.xv,{color:"subtle",lineClamp:1,size:"200",weight:"bold",children:V.bt("Stiker belum didukung", "Sticker not supported yet", "closeup.StoryPin.stickerBlock.genericStickerError", undefined, true)})});break;case L.h8.VTO_MAKEUP_STICKER:e=(0,p.jsx)(i.xv,{size:"300",weight:"bold",children:V.bt("Coba stiker ini di ponsel Anda!", "Try this sticker on your phone!", "closeup.storyPin.vtoMakeupSticker", undefined, true)})}return(0,p.jsx)(i.xu,{alignItems:"center","data-test-id":er,display:"flex",justifyContent:"center",padding:er===L.h8.PRODUCT_STICKER?1:3,width:"100%",children:Q?(0,p.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:V.bt("Tag dihapus", "Tag removed!", "closeup.storyPin.stickerBlock", undefined, true)}):e})};return(0,p.jsx)(S.Fragment,{children:ej?null:(0,p.jsxs)(i.xu,{ref:T,dangerouslySetInlineStyle:{__style:{left:eS,top:ew,transform:"rotate(".concat(void 0===X?0:X,"deg)")}},"data-test-id":(er||"")+"_container",display:"flex",height:ex+2*l.Xw,margin:-1,padding:1,position:"absolute",rounding:2,width:eP+2*l.Xw,zIndex:s.B_,children:[(0,p.jsx)(i.iP,{disabled:ej,onTap:x?eE:function(e){var t=e.event;ej||(_({event_type:101,component:228,element:r,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:m}}),em?C(!0):eC({event:t}))},rounding:"pill"}),x&&(0,p.jsx)(i.mh,{zIndex:s.ej,children:(0,p.jsx)(i.J2,{_deprecatedShowCaret:!0,anchor:T.current,idealDirection:"up",onDismiss:eE,positionRelativeToAnchor:!1,size:Q?"flexible":"sm",children:Q?eT():(0,p.jsx)(i.iP,{fullWidth:!0,onTap:function(e){e.event.preventDefault(),Q||(_({event_type:101,component:228,element:g,object_id_str:eo,view_type:3,view_parameter:157,aux_data:{story_pin_page_id:m}}),ep?A(ep):eE())},children:eT()})})}),!!el&&j&&(0,p.jsx)(I,{aggregatedCommentId:el,onDismiss:function(){C(!1)}})]})})}var G=n(445698),H=n(47676),N=n(238187),W=n(452750);function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function X(e){var t=e.block,n=e.fontsLoaded,r=e.horizontalOffset,o=e.pageAspectRatio,a=e.scaleFactor,l=e.thumbnail,u=e.verticalOffset,s=t.block_style,c=t.style,d=void 0===c?L.Cc:c,f=t.text,m=d.alignment,h=d.font,y=d.font_size,g=d.highlight_color,v=d.vertical_alignment,b=void 0===v?L.Cc.vertical_alignment:v,_=(null!=d?d:{}).hex_color,P=void 0===_?L.Cc.hex_color:_,x=U((0,S.useState)(0),2),w=x[0],O=x[1],j=U((0,S.useState)([]),2),E=j[0],C=j[1],T=h||L.Cc.font,A=T.name,I=T.default_size,k=T.letter_spacing,R=T.line_height,M=(0,W.Z)(T),D=Math.round(100*((null==s?void 0:s.width)||100))/1e4,F=Math.round(100*((null==s?void 0:s.height)||100))/1e4,z=Math.round(100*((null==s?void 0:s.x_coord)||0))/1e4,V=Math.round(100*((null==s?void 0:s.y_coord)||0))/1e4;(0,S.useEffect)(function(){if(n){var e=(0,N.KV)({text:f,boxHeight:H.q8/o*F,boxWidth:H.q8*D,font:M,startFontSize:Math.floor(y||I||24)});C(e.lines),O(e.fontSize)}},[n,f]);var B=w*a,Z=g?(0,L.pE)(B,R):{x:0,y:0},K=D*H.q8*a+2*Z.x,X=F*(H.q8/o)*a+2*Z.y,q=(void 0===r?0:r)+z*H.q8*a-Z.x,$=l?"".concat(100*V,"%"):(void 0===u?0:u)+V*(H.q8/o)*a-Z.y;return(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{left:q,top:$}},display:"flex",height:X,position:"absolute",width:K,children:(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:(0,G.RK)({alignment:m,verticalAlignment:b})},children:(0,p.jsx)(i.xu,{display:"inlineBlock",maxWidth:"100%",children:(0,p.jsx)("p",{style:(0,G.BN)({fontSize:B,hexColor:P,letterSpacing:k,lineHeight:R,name:A}),children:E.map(function(e,t){return(0,p.jsx)("span",{"data-gestalt-valid-html":"Text",style:(0,G.xm)({fontSize:B,hasText:e.text.length>0,highlightColor:g||null,lineHeight:R}),children:t===E.length-1?e.text:(0,p.jsxs)(S.Fragment,{children:[e.text," ",(0,p.jsx)("br",{})]})},"paragraphLine-".concat(t,"-").concat((null!=f?f:"").substr(0,9)))})})})})})}var q=n(179639);function $(e){var t=e.ownerId,n=(0,E.Z)(),r=(0,R.Z)(),o=r.isAuth&&r.id===t;return(0,p.jsxs)(i.xu,{alignItems:"center",color:"tertiary",direction:"column",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:[(0,p.jsx)(i.xv,{color:"inverse",children:o?n.bt("Video Anda sedang diproses!", "Your video is processing!", "closeup.storyPin.videoPlaceholder", undefined, true):n.bt("Video masih diproses!", "This video is still processing!", "closeup.storyPin.videoPlaceholder", undefined, true)}),(0,p.jsx)(i.xv,{color:"inverse",children:n.bt("Periksa lagi nanti.", "Check back in a few minutes.", "closeup.storyPin.videoPlaceholder", undefined, true)})]})}var J=n(139707),Y=n(934645),Q=n(716920),ee=n(956077),et=n(85574),en=n(601686),er=n(653621);function eo(e){return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=eo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eo(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eo(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function el(e){var t,n,r,o,u,s,c,d,f,h,y,g=e.block,v=e.isActive,b=e.pwtTrackImageLoad,P=e.thumbnail,S=(0,E.Z)(),w=(0,en.x4)(),O=w.closeupWithinMasonryEnabled,j=w.isCloseupMediaViewerOpen,C=w.peekCloseupEnabled,T=w.showProductDetailPage,A=(0,Y.Z)({showProductDetailPage:T}),I=(P||A?{}:(0,et.Z)({closeupWithinMasonryEnabled:O})).borderStyle,k=(null==(t=g.image)||null==(n=t.images)?void 0:n["750x"])||(null==(r=g.image)||null==(o=r.images)?void 0:o["474x"]),R=k||{},M=R.height,D=void 0===M?1:M,L=R.width,F=void 0===L?1:L,z=x({isUseCache:!0,signature:g.image_signature}),V=(0,J.Z)(k).peekRedesignFastFollowsEnabled;return k||z?(y=P?"cover":O||V?"none":"contain",(0,p.jsx)(i.xu,{alignItems:C?"center":void 0,dangerouslySetInlineStyle:{__style:ea(ea({},I),{},{aspectRatio:O?(0,a.GJ)(F,D):void 0,contain:"strict",display:C?"grid":"block",justifySelf:O?"center":void 0})},height:O?"100%":"inherit",overflow:"hidden",width:O?void 0:"inherit",children:z?(0,p.jsx)(_,{_enableViewTransitions:!0,alt:S.bt("Gambar Story PIN", "Story pin image", "closeup.storypin.renderer", undefined, true),color:l.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fallbackSrc:null!=(u=null==(s=z.media)?void 0:s.src)?u:"",fit:y,isActive:v,naturalHeight:D,naturalWidth:F,onLoad:b,src:null!=(c=null==k?void 0:k.url)?c:"",suppressViewTransitionTags:j}):(0,p.jsx)(m.Z,{_enableViewTransitions:!0,alt:S.bt("Gambar Story PIN", "Story pin image", "closeup.storypin.renderer", undefined, true),borderStyle:I,color:l.yc,elementTiming:"StoryPinImageBlock-MainPinImage",fetchPriority:O?"high":void 0,fit:y,isActive:v,naturalHeight:null!=(d=null==k?void 0:k.height)?d:1,naturalWidth:null!=(f=null==k?void 0:k.width)?f:1,onLoad:b,src:null!=(h=null==k?void 0:k.url)?h:"",suppressViewTransitionTags:j})})):null}function eu(e){var t,n,r=e.activePageIndex,o=e.block,a=e.closeupStoryPinViewability,u=e.customEndCard,s=e.isActive,c=e.isSplitLayout,d=e.musicRecordingId,f=e.muted,m=e.onEnded,h=e.onUpdateVideoInfo,y=e.ownerId,g=e.pageAspectRatio,v=e.pageDimensions,b=e.pageIndex,_=e.pin,P=e.pinId,S=e.scaleFactor,w=e.stillLoading,O=e.videoThumbnailStartTime,j=e.thumbnail,E=void 0!==j&&j,C=o.block_style,T=(C=void 0===C?{}:C).height,A=void 0===T?100:T,I=C.width,k=void 0===I?100:I,R=C.x_coord,M=void 0===R?0:R,D=C.y_coord,L=void 0===D?0:D,F=o.video,z=(0,en.x4)().closeupWithinMasonryEnabled,V=l._B/g,B=v.height,Z=v.width,G=k*l._B*S/100,H=k<100?Math.min(Math.max(100,k)-Math.abs(M),k):Math.min(Math.max(k-Math.abs(M),0),100),N=A<100?Math.min(Math.max(100,A)-Math.abs(L),A):Math.min(Math.max(A-Math.abs(L),0),100),W=z?"100%":N*V*S/100,U=z?"100%":H*l._B*S/100,K=Math.max(L,0)*V*S/100,X=Math.max(M,0)*l._B*S/100,J=x({isUseCache:!F,signature:o.video_signature});if(w)return null;var Y=(J||{}).media||{},Q=Y.duration,ee=Y.src,et=!!ee&&!!Q;return F||et?!!((null==F||null==(t=F.video_list)?void 0:t.V_HLSV3_MOBILE)||(null==F||null==(n=F.video_list)?void 0:n.V_720P)||et)&&(0,p.jsx)(i.xu,{height:void 0!==c&&c?"50%":"100%",overflow:"hidden",position:"relative",children:(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{alignSelf:"anchor-center",left:X,top:K}},"data-test-id":"story-pin-video-block",height:E?B:W,overflow:"hidden",position:"absolute",width:E?Z:U,children:(0,p.jsx)(q.Z,{activePageIndex:r,aspectRatio:g,blockHeight:E?B:A*V*S/100,blockWidth:E?Z:G,closeupStoryPinViewability:a,customEndCard:u,isPlaying:s,musicRecordingId:d,muted:f,onEnded:m,onUpdateVideoInfo:h,pageIndex:b,pin:_,pinId:P,video:F||{video_list:{V_EXP7:{duration:Q?1e3*Q:0,url:ee}}},videoThumbnailStartTime:O})})}):(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{left:X,top:K}},height:W,position:"absolute",width:U,children:(0,p.jsx)($,{ownerId:y})})}var es=(void 0!==o||(o=n(35312)).hash&&"8bb1bb1f7bafeed0fe43bed44ef12d2a"!==o.hash&&console.error("The definition of 'StoryPinBlock_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o);function ec(e){var t,n=e.activePageIndex,r=e.block,o=e.closeupStoryPinViewability,a=e.customEndCard,u=e.disableProductStickers,s=e.fontsLoaded,c=e.horizontalOffset,d=e.isActive,m=e.isSplitLayout,h=e.musicRecordingId,y=e.muteVideos,g=e.onEnded,v=e.onFlyoutOpen,b=e.onUpdateVideoInfo,_=e.ownerId,P=e.pageAspectRatio,x=e.pageHeight,S=e.pageIndex,w=e.pageWidth,O=e.pin,j=e.pinId,E=e.previewOnly,C=e.pinKey,T=e.stillLoading,A=e.thumbnail,I=void 0!==A&&A,k=e.transform,R=e.verticalOffset,D=e.videoPinProgress,F=e.videoThumbnailStartTime,z=(0,M.Z)(es,C),V=(0,en.x4)().closeupWithinMasonryEnabled,B=r.block_style,G=(B=void 0===B?{}:B).height,H=void 0===G?100:G,N=B.width,W=void 0===N?100:N,U=B.x_coord,K=B.y_coord,q=r.interactive_sticker_type,$=(0,Q.g)();if(0===H||0===W)return null;var J=w/l._B;switch(r.type){case L.h8.PARAGRAPH:case L.h8.HEADING:return(0,p.jsx)(X,{block:r,fontsLoaded:s,horizontalOffset:c,pageAspectRatio:P,scaleFactor:J,thumbnail:I,verticalOffset:R});case L.h8.VIDEO:return(0,p.jsx)(eu,{activePageIndex:n,block:r,closeupStoryPinViewability:o,customEndCard:a,isActive:d,isSplitLayout:void 0!==m&&m,musicRecordingId:h,muted:y,onEnded:g,onUpdateVideoInfo:b,ownerId:_,pageAspectRatio:P,pageDimensions:{height:x,width:w},pageIndex:S,pin:O,pinId:j,scaleFactor:J,stillLoading:void 0!==T&&T,thumbnail:I,videoThumbnailStartTime:F});case L.h8.IMAGE:var Y=k||{},et=Y.scaleX,eo=Y.scaleY;return(0,p.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{display:V?"grid":"block",height:"".concat(H,"%"),left:"".concat((void 0===U?0:U)*(void 0===et?1:et),"%"),top:"".concat((void 0===K?0:K)*(void 0===eo?1:eo),"%"),width:"".concat(W,"%")}},"data-test-id":"story-pin-image-block",overflow:"hidden",position:"absolute",children:(0,p.jsx)(el,{block:r,isActive:d,pwtTrackImageLoad:function(){$&&d&&($.addBinaryAnnotation("pin.id",j,"STRING"),$.addBinaryAnnotation("video",!1,"BOOL"),$.stop()),d&&((0,ee.rt)("pin.id",j,"STRING"),(0,ee.rt)("video",!1,"BOOL"),(0,ee.Nx)(er.pM),(0,ee.l7)(er._z))},thumbnail:I})});case L.h8.MENTION_STICKER:return!E&&(0,p.jsx)(Z,{block:ea({},r),elementType:12120,horizontalOffset:c,onFlyoutOpen:v,pageAspectRatio:P,pageIndex:S,pinKey:null,scaleFactor:J,tooltipElementType:12121,verticalOffset:R,videoPinProgress:D});case L.h8.GENERIC_STICKER:return!E&&(t=5===(void 0===q?null:q),(0,p.jsx)(Z,{block:ea({},r),elementType:t?12827:12858,horizontalOffset:c,onFlyoutOpen:v,pageAspectRatio:P,pageIndex:S,pinKey:null,scaleFactor:J,tooltipElementType:t?12828:12859,verticalOffset:R,videoPinProgress:D}));case L.h8.PRODUCT_STICKER:return!E&&!u&&(0,p.jsx)(Z,{block:ea({},r),elementType:12223,horizontalOffset:c,onFlyoutOpen:v,pageAspectRatio:P,pageIndex:S,pinKey:z,scaleFactor:J,tooltipElementType:12224,verticalOffset:R,videoPinProgress:D});case L.h8.VTO_MAKEUP_STICKER:return!E&&(0,p.jsx)(Z,{block:ea({},r),elementType:12561,horizontalOffset:c,onFlyoutOpen:v,pageAspectRatio:P,pageIndex:S,pinKey:null,scaleFactor:J,tooltipElementType:12561,verticalOffset:R,videoPinProgress:D});case L.h8.COMMENT_REPLY_STICKER:return r.type===L.h8.COMMENT_REPLY_STICKER&&!E&&(0,p.jsx)(f,{block:r,horizontalOffset:c,pageAspectRatio:P,scaleFactor:J,verticalOffset:R});default:return null}}},995415:function(e,t){t.Z=function(e){var t=e.carouselData,n=e.domain,r="",o=n||"";if(t){var i,a=t.carouselSlots,l=void 0===a?[]:a,u=null!=(i=t.index)?i:0;l&&l[u]&&(r=l[u].link||"",o=l[u].domain||o)}return{carouselLink:r,currentDomain:o}}},979904:function(e,t,n){n.d(t,{Z:function(){return f}});var r,o=n(586659);n(872555);var i=n(995415),a=n(934645),l=n(28427),u=n(906498),s=n(644493),c=n(664897),d=n(601686),p=(void 0!==r||(r=n(331047)).hash&&"b2a27d44d1f3dbd42301b82866212272"!==r.hash&&console.error("The definition of 'useCalculateMaxWidthAndHeightForSideBySideVariant_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function f(e){var t,n,r,f,m,h,y=e.pinKey,g=(0,d.x4)().closeupWithinMasonryEnabled,v=(0,c.Z)(),b=(0,l.Z)(p,y),_=(0,a.Z)({showProductDetailPage:!!(null!=b&&b.isEligibleForPdp)}),P=(0,u.Z)().group,x=(0,o.useMemo)(function(){var e;return null!=b&&b.carouselData?{carouselSlots:(null==(e=b.carouselData.carouselSlots)?void 0:e.map(function(e){return{domain:e.domain,link:e.link}}))||[],index:b.carouselData.index}:void 0},[null==b?void 0:b.carouselData]),S=(0,o.useMemo)(function(){return(0,i.Z)({carouselData:x,domain:null==b?void 0:b.domain})},[x,null==b?void 0:b.domain]).currentDomain,w=(0,o.useMemo)(function(){return S?S.split(".")[0]:""},[S]),O=(0,o.useMemo)(function(){var e=(null==b?void 0:b.trackedLink)||(null==b?void 0:b.link)||"",t=(0,s.Z)(e);return null!=t?t:e},[null==b?void 0:b.trackedLink,null==b?void 0:b.link]),j=(0,o.useMemo)(function(){var e,t,n,r,o,i,a,l=null==b||null==(e=b.richMetadata)||null==(t=e.products)?void 0:t[0],u=null==l?void 0:l.offerSummary,s=!!((null==u?void 0:u.price)||(null==u?void 0:u.standardPrice)),c=null==b||null==(n=b.linkDomain)||null==(r=n.officialUser)?void 0:r.firstName;return{hasPrice:s,domainOwner:!!(null==b||null==(o=b.closeupAttribution)?void 0:o.firstName)||!!c,merchantName:(null==b||null==(i=b.linkUserWebsite)||null==(a=i.officialUser)?void 0:a.firstName)||c||""}},[null==b||null==(t=b.richMetadata)?void 0:t.products,null==b||null==(n=b.linkDomain)||null==(r=n.officialUser)?void 0:r.firstName,null==b||null==(f=b.closeupAttribution)?void 0:f.firstName,null==b||null==(m=b.linkUserWebsite)||null==(h=m.officialUser)?void 0:h.firstName]),E=(0,o.useMemo)(function(){return!!((j.merchantName||w)&&O)},[j.merchantName,w,O]),C=(0,o.useMemo)(function(){var e,t=0,n=0;return e=84+(null!=b&&b.isEligibleForPdp&&j.hasPrice?18:0),t+=(null!=b&&b.closeupUnifiedTitle||null!=b&&b.gridTitle?23:0)+("enabled_idea_pin"!==P&&j.domainOwner?40:0),n+=64*!!E,e+=Math.max(t,n)},[null==b?void 0:b.isEligibleForPdp,j.hasPrice,null==b?void 0:b.closeupUnifiedTitle,null==b?void 0:b.gridTitle,P,j.domainOwner,E]);if(!g)return{maxHeight:void 0};if(v)return{maxHeight:_?void 0:"calc(round(100vh, 1px) - ".concat(80,"px - ").concat(C,"px)")};var T=Math.round(window.innerHeight)-80-C;return{maxHeight:_?void 0:T}}},139707:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(899117),o=n(675973),i=n(15667),a=n(647709);function l(e){var t=(0,i.B)().isAuthenticated,n=(0,a.HG)(),l=(0,o.Z)().checkExperiment,u=t&&n&&l("closeup_dweb_peek_redesign_fast_follow").anyEnabled,s=l("closeup_dweb_peek_redesign_fast_follow").group,c=t&&n&&l("closeup_dweb_side_by_side_redesign_fast_follow").anyEnabled,d=c?l("closeup_dweb_side_by_side_redesign_fast_follow").group:"";return{peekRedesignFastFollowsExpGroup:s,peekRedesignFastFollowsEnabled:u&&(0,r.Z)(s,e),sideBySideRedesignFastFollowsExpGroup:d,sideBySideRedesignFastFollowsEnabled:c,sideBySideFullWidthCTAEnabled:"enabled_full_width_cta"===d||"employees"===d,sideBySidePWTDeferActionBarLoad:"enabled_pwt_defer_action_bar_load"===d}}},934645:function(e,t,n){var r=n(675973),o=n(15667),i=n(647709);t.Z=function(e){var t=e.showProductDetailPage,n=e.skipActivation,a=(0,r.Z)().checkExperiment,l=(0,i.HG)();return!!(0,o.B)().isAuthenticated&&!!l&&!!t&&a("closeup_dweb_blended_ui",{dangerouslySkipActivation:n}).anyEnabled}},11919:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(586659),o=n(341044),i=n(20256),a=n(707915),l=n(856782),u=n(111330),s=n(702849),c=n(19585),d=n(369416),p=n(753143),f=n(341742),m=n(664897),h=n(790427),y=n(382718);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e){var t=e.containerRef,n=e.onAnimationEnd,o=e.startAnimating,a=e.containerWidth,l=(0,c.Z)(),f=(0,m.Z)(),g=(0,p.M0)(),v=_((0,r.useState)(),2),P=v[0],x=v[1],S=_((0,r.useState)(!1),2),w=S[0],O=S[1],j=_((0,r.useState)(),2),E=j[0],C=j[1],T=l.bt("Bagikan", "Share", "secondarySendButtonAnimation.share", undefined, true),A={buttonStyle:{animation:P,backgroundColor:s.Et},textStyle:{animation:E}};return(0,r.useEffect)(function(){if(!f&&a)if(o){O(!0);var e=(g.getItem(u.$M)||{animationSeenCount:0}).animationSeenCount;g.setItem(u.$M,{animationSeenCount:e+1,lastAnimationTimestamp:Date.now()}),x("buttonSlideOut 1s ease-in forwards"),C("textFadeIn 1s ease-in forwards")}else x("buttonSlideIn .3s ease-in forwards"),C("textFadeOut .3s ease-in-out forwards")},[a,g,o,f]),(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)(d.Z,{unsafeCSS:"\n@keyframes buttonSlideOut {\n  0% {\n    width: ".concat(48,"px;\n  }\n  15% {\n    width: ").concat(a,"px;\n  }\n  100% {\n    width: ").concat(a,"px;\n  }\n}\n\n@keyframes textFadeIn {\n  0% {\n    opacity: 0;\n  }\n  15% {\n    opacity: 0;\n  }\n  25% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes buttonSlideIn {\n  0% {\n    width: ").concat(a,"px;\n  }\n  100% {\n    width: ").concat(48,"px;\n  }\n}\n\n@keyframes textFadeOut {\n  0% {\n    opacity: 1;\n  }\n  15% {\n    opacity: 1;\n  }\n  25% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n")}),(0,y.jsx)(i.xu,{ref:t,alignItems:"center",dangerouslySetInlineStyle:{__style:b(b({},A.buttonStyle),{},{visibility:w?"visible":"hidden"})},display:"flex",onAnimationEnd:function(e){"buttonSlideIn"===e.animationName&&n()},position:"absolute",rounding:4,zIndex:h.mS,children:(0,y.jsxs)(i.kC,{alignItems:"center",gap:1,children:[(0,y.jsx)(i.xu,{padding:3,children:(0,y.jsx)(i.JO,{accessibilityLabel:T,color:"default",icon:"share",size:24})}),(0,y.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:A.textStyle},marginEnd:3,children:(0,y.jsx)(i.mg,{size:"md",children:T})})]})})]})}function S(e){var t=e.onAnimationEnd,n=(0,r.useRef)(null),o=_((0,r.useState)(0),2),i=o[0],a=o[1],u=_((0,r.useState)(!1),2),s=u[0],c=u[1];return(0,f.Z)(function(){var e=setTimeout(function(){c(!0);var e=setTimeout(function(){c(!1)},3e3);return function(){return clearTimeout(e)}},l.S+1e3);return function(){return clearTimeout(e)}}),(0,r.useEffect)(function(){if(n.current&&!i&&s){var e=n.current.getBoundingClientRect().width;e&&a(e)}},[n,i,s]),(0,y.jsx)(x,{containerRef:n,containerWidth:i,onAnimationEnd:t,startAnimating:s})}var w=n(121836),O=n(832651),j=n(675973),E=n(238589),C=n(807765),T=n(74229),A=n(539532);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach(function(t){M(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function M(e,t,n){var r;return(r=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==I(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e){var t=e.controllerOptions,n=e.iconColor,l=e.iconOnly,s=e.buttonText,d=e.showSendAnimation,m=void 0!==d&&d,h=e.tabIndex,g=void 0===h?0:h,v=e.closeupWithinMasonryEnabled,b=void 0!==v&&v,_=e.isInCloseupMediaViewer,P=void 0!==_&&_,x=(0,c.Z)(),I=(0,p.M0)(),k=(0,E.Nl)(),L=(0,j.Z)().checkExperiment,F=(0,C.f)().setIsShowingShareButton,z=(0,r.useRef)(null),V=D((0,r.useState)(m),2),B=V[0],Z=V[1],G=P?new i.H3([T.k]):new i.Ry(5),H=D((0,r.useState)(function(){var e=k.getItem(w.bl)||0;return(I.getItem(u.$M)||{animationSeenCount:0}).animationSeenCount<2&&(2===e||3===e)}),1)[0],N=function(){Z(!1)};return(0,f.Z)(function(){var e=(I.getItem(u.$M)||{lastAnimationTimestamp:0}).lastAnimationTimestamp;(0,o.Z)(new Date(e),new Date)||I.setItem(u.$M,{animationSeenCount:0,lastAnimationTimestamp:e})}),(0,r.useEffect)(function(){return F(m),function(){F(!1)}},[F,m]),(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)(A.Z,R(R({},t),{},{children:function(e){var r=e.handleSendShareFlyoutButtonClick;return(0,y.jsxs)(i.u,{inline:!0,text:x.bt("Bagikan", "Share", "Closeup.SharePin.Icon", undefined, true),zIndex:G,children:[B&&H&&L("sg_dweb_improved_share_animation_on_closeup").anyEnabled&&(0,y.jsx)(i.xu,{"data-test-id":"closeup-share-button",children:(0,y.jsx)(i.iP,{onTap:r,children:(0,y.jsx)(S,{onAnimationEnd:N})})}),P?(0,y.jsx)(i.zx,{ref:z,accessibilityLabel:x.bt("Bagikan", "Share", "Closeup.SharePin.AccessibilityLabel", undefined, true),color:"semiTransparentWhite",iconEnd:"share",onClick:r,size:"lg",tabIndex:g,text:(0,y.jsx)(i.xv,{weight:"bold",children:x.bt("Bagikan", "Share", "Closeup.SharePin.Button", undefined, true)})}):(0,y.jsx)(a.Z,{ref:z,accessibilityLabel:x.bt("Kirim", "Send", "Accessible label for button to send this pin", undefined, true),bgColor:b?"white":void 0,buttonText:s,handleClick:function(){return r()},icon:"share",iconColor:n,iconOnly:l,isActive:t.isFlyoutOpen,tabIndex:g,testId:"closeup-share-button"})]})}})),(0,y.jsx)(O.N,{anchors:M({},3017,z.current),idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})]})}},869985:function(e,t,n){n.d(t,{Z:function(){return ec}});var r,o,i=n(586659);n(872555);var a=n(20256),l=n(592821),u=n(979904),s=n(890479),c=n(11919),d=n(980787),p=n(679422),f=n(28427),m=n(19585),h=n(601686),y=n(603316),g=n(382718);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){O(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(S=function(){return!!e})()}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}var E={__style:{backgroundColor:"#000"}},C=(void 0!==r||(r=n(307595)).hash&&"e04be51b4be0a2585e7803d004fa83b7"!==r.hash&&console.error("The definition of 'CloseupVideoEndCard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),T=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&P(o,e);var t,n,r=(t=S(),function(){var e,n=w(o);return e=t?Reflect.construct(n,arguments,w(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return x(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return O(x(e=r.call.apply(r,[this].concat(n))),"handleRestartVideo",function(t){var n,r,o=t.event;o.stopPropagation(),null==(n=(r=e.props).onRestartVideo)||n.call(r,{event:o}),(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"restart",variant:"enabled_send_first"}})}),O(x(e),"handleShareVideo",function(){var t=e.props,n=t.clientTrackingParams,r=t.onToggleFlyout,o=t.isFlyoutOpen,i=t.pinId,a=t.requireAuth,l=t.logContextEvent;if(o&&(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}}),l({event_type:101,component:179,object_id_str:i,view_type:3,view_parameter:156,element:11731,clientTrackingParams:n}),a)return void a();r&&r()}),O(x(e),"handleExternalSend",function(){(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"shareSheetOpen",variant:"enabled_send_first"}})}),O(x(e),"renderReplayButton",function(){return(0,g.jsx)(a.iP,{accessibilityLabel:e.props.i18n.bt("Tonton lagi", "Watch again", "Button when pressed restarts the video", undefined, true),onTap:e.handleRestartVideo,rounding:2,children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(a.xu,{marginEnd:3,children:(0,g.jsx)(a.JO,{accessibilityLabel:e.props.i18n.bt("Tonton lagi", "Watch again", "Button when pressed restarts the video", undefined, true),color:"inverse",icon:"refresh",size:18})}),(0,g.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:e.props.i18n.bt("Tonton lagi", "Watch again", "Clickable label when pressed restarts the video", undefined, true)})]})})}),O(x(e),"renderShareButton",function(){var t=e.props,n=t.clientTrackingParams,r=t.gridDescription,o=t.imageSrc,i=t.isFlyoutOpen,l=t.onFlyoutDismiss,u=t.pinId;return(0,g.jsx)(a.iP,{accessibilityLabel:e.props.i18n.bt("Kirim", "Send", "end.video.send.icon.label", undefined, true),onTap:e.handleShareVideo,rounding:2,children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",justifyContent:"center",padding:2,children:[(0,g.jsx)(c.default,{controllerOptions:{flyoutDisplayOptions:{shownWithinMasonry:!0},loggingOptions:{component:179,element:72,onExternalSend:e.handleExternalSend,viewType:3},isFlyoutOpen:i,onFlyoutDismiss:l,onToggleFlyout:function(){},sendObject:{type:"pin",description:r,id:u,imageUrl:o,url:"/pin/".concat(u,"/"),clientTrackingParams:n}},iconColor:"white",iconOnly:!0,tabIndex:-1}),(0,g.jsx)(a.xu,{children:(0,g.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:e.props.i18n.bt("Kirim", "Send", "end.video.send.icon.label", undefined, true)})})]})})}),e}return n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.clientTrackingParams,n=e.pinId,r=e.logContextEvent;(0,y.nP)("web.video.endcard.share",{sampleRate:1,tags:{status:"land",variant:"enabled_send_first"}}),r({event_type:13,component:179,object_id_str:n,view_type:3,view_parameter:156,element:11731,clientTrackingParams:t})}},{key:"render",value:function(){var e=this.props,t=e.backgroundImage,n=e.naturalHeight,r=e.naturalWidth,o=e.maxHeight,i=e.maxWidth,l=e.pinTitle;return(0,g.jsx)(a.xu,{maxHeight:o,maxWidth:i,children:(0,g.jsxs)(a.Ee,{alt:l||"",naturalHeight:n,naturalWidth:r,src:t,children:[(0,g.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:E,left:!0,position:"absolute",right:!0,top:!0}),(0,g.jsx)(a.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,maxHeight:o,maxWidth:i,position:"absolute",top:!0,width:"100%",children:(0,g.jsxs)(a.xu,{position:"absolute",children:[(0,g.jsx)(a.xu,{children:this.renderShareButton()}),(0,g.jsx)(a.xu,{alignSelf:"center",children:this.renderReplayButton()})]})})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(i.PureComponent);function A(e){var t,n=e.pinKey,r=e.variant,o=(0,f.Z)(C,n),i=(0,d.u)().logContextEvent,a=(0,m.Z)(),s=(0,p.Z)(),c=(0,h.x4)(),y=c.closeupWithinMasonryEnabled,v=c.peekCloseupEnabled,b=c.viewportSize,P=(0,l.Re)(),x=P.maxHeight,S=P.fiftyPercentHeight,w=P.fiftyPercentWidth,O=(0,u.Z)({pinKey:o}).maxHeight;return v?t="sm"===b?S:x:y&&(t=O),(0,g.jsx)(T,_(_({},e),{},{closeupWithinMasonryEnabled:y,i18n:a,logContextEvent:i,maxHeight:"media-viewer"===r?"inherit":t,maxWidth:"media-viewer"===r?"inherit":w,requireAuth:s}))}var I=function(e){var t=e.backgroundImage,n=e.onRestartVideo,r=e.pinTitle,o=(0,m.Z)();return(0,g.jsx)(a.xu,{"data-test-id":"video-end-card",height:"100%",width:"100%",children:(0,g.jsxs)(a.Ee,{alt:r||"",fit:"contain",naturalHeight:1,naturalWidth:1,src:t,children:[(0,g.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:E,left:!0,opacity:.8,position:"absolute",right:!0,top:!0}),(0,g.jsx)(a.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",left:!0,position:"absolute",top:!0,width:"100%",children:(0,g.jsx)(a.xu,{children:(0,g.jsx)(a.iP,{onTap:n,rounding:2,children:(0,g.jsxs)(a.xu,{alignItems:"center",display:"flex",padding:2,children:[(0,g.jsx)(a.hU,{accessibilityLabel:o.bt("Putar ulang", "Replay", "closeupVideo.endCard.ReplayButton", undefined, true),icon:"refresh",iconColor:"white",size:"md"}),(0,g.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:o.bt("Putar ulang", "Replay", "closeupVideo.endCard.ReplayButton", undefined, true)})]})})})})]})})},k=n(293565),R=n(392824),M=n(716920),D=n(361423),L=n(754545),F=n(956077),z=n(15667),V=n(281106),B=n(181663),Z=n(123317),G=n(724084),H=n(510928),N=n(647709),W=n(239728),U=n(104659),K=n(653621),X=n(589357),q=n(720445);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(e,t){return(et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function en(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(er=function(){return!!e})()}function eo(e){return(eo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t,n){return(t=ea(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ea(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}var el=(void 0!==o||(o=n(60533)).hash&&"53ae9ecd15f057f744460205e5d495fd"!==o.hash&&console.error("The definition of 'CloseupVideoNonDuplo_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),eu=function(e,t){var n,r;t({currentTime:null!=(n=null==e?void 0:e.currentTime)?n:0,duration:null!=(r=null==e?void 0:e.duration)?r:1})},es=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&et(o,e);var t,n,r=(t=er(),function(){var e,n=eo(o);return e=t?Reflect.construct(n,arguments,eo(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==$(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return en(e)}(this,e)});function o(){var e;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return ei(en(e=r.call.apply(r,[this].concat(n))),"state",{controls:"always"===e.props.showControls&&!e.props.disabled,fullscreen:!1,playing:!(0,k.G6)(e.props.requestContext.userAgent.browserName)&&!!e.props.autoplay&&!e.props.disabled,ready:!1,seeking:!1,showEndCard:!1,volume:e.props.muted||e.props.shouldMute?0:1,videoStartTime:e.props.videoStartTime||0}),ei(en(e),"setVideoPwtLoadingStop",function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(D.Z){var n=e.props,r=n.storyPinStepStopwatch,o=n.pinId;r&&(t||r.addAnnotation("video.startup.end"),r.addBinaryAnnotation("pin.id",o,"STRING"),r.addBinaryAnnotation("video",!0,"BOOL"),r.addBinaryAnnotation("preload",t,"BOOL"),r.addSubspan({name:"perceived_video_load",endTime:D.Z.now()}),r.stop()),t||(0,R.ZP)("video.startup.end"),(0,R.L8)("perceived_video_load"),(0,F.Nx)(K._z),(0,F.rt)("pin.id",o,"STRING"),(0,F.rt)("video",!0,"BOOL"),"STORY_PIN_CLOSEUP"===(0,L.Ly)()&&(0,F.l7)(K.pM)}}),ei(en(e),"componentDidMount",function(){var t=e.props,n=t.customThumbnail,r=t.video,o=t.preferMp4,i=r.mp4,a=r.hlsv3||r.hls||null,l=(o&&i||a||{}).thumbnail,u=(0,X.j4)(n||l);(null==u?void 0:u.ready)===4&&(e.setState({ready:!0}),e.props.autoplay&&e.setVideoPwtLoadingStop(!0)),document.addEventListener("fullscreenchange",e.onFullscreenChange),document.addEventListener("webkitfullscreenchange",e.onFullscreenChange),document.addEventListener("mozfullscreenchange",e.onFullscreenChange),document.addEventListener("MSFullscreenChange",e.onFullscreenChange)}),ei(en(e),"componentWillUnmount",function(){document.removeEventListener("fullscreenchange",e.onFullscreenChange),document.removeEventListener("webkitfullscreenchange",e.onFullscreenChange),document.removeEventListener("mozfullscreenchange",e.onFullscreenChange),document.removeEventListener("MSFullscreenChange",e.onFullscreenChange)}),ei(en(e),"onFullscreenChange",function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||e.props.setPanelOpen(function(e){return!e})}),ei(en(e),"componentDidUpdate",function(t,n){e.props.videoStartTime&&e.props.videoStartTime!==t.videoStartTime&&e.setState({videoStartTime:e.props.videoStartTime}),!1===t.isPlaying&&e.props.isPlaying&&e.setState({playing:!0,controls:"never"!==e.props.showControls}),t.isPlaying&&!1===e.props.isPlaying&&e.setState({playing:!1}),t.autoplay!==e.props.autoplay&&(e.setState({playing:!!e.props.autoplay}),e.props.autoplay&&e.state.ready&&e.setVideoPwtLoadingStop(!0)),t.muted!==e.props.muted&&e.setState({volume:+!e.props.muted}),"never"===e.props.showControls&&n.controls&&e.setState({controls:!1}),(n.controls||n.playing)&&e.props.disabled&&e.setState({playing:!1,controls:!1}),!n.playing&&e.state.playing&&e.props.onPlay&&e.props.onPlay(),e.props.isCloseupMediaViewerOpen&&!t.isCloseupMediaViewerOpen&&e.setState({playing:!1})}),ei(en(e),"handleTouch",function(){var t=e.state.seeking,n=e.props.disabled;t||n||e.setState(function(e){return{playing:!e.playing}})}),ei(en(e),"handleShowControls",function(){return e.setState({controls:!0})}),ei(en(e),"handleHideControls",function(){return e.setState({controls:!1})}),ei(en(e),"handleReady",function(){var t=e.state,n=t.ready,r=t.playing,o=e.props,i=o.autoplay,a=o.disabled;i&&!n&&e.setVideoPwtLoadingStop(),e.setState({ready:!0}),(0,k.G6)(e.props.requestContext.userAgent.browserName)&&!r&&i&&!a&&e.setState({playing:!0})}),ei(en(e),"handleEnded",function(t){var n=t.event,r=e.props,o=r.customThumbnail,i=r.customEndCard,a=r.pinId,l=r.setCurrentVideo,u=r.loop,s=r.onEnded;n.stopPropagation(),!u&&(e.setState({playing:!1}),o&&o.endsWith(".gif")||i||(e.setState({showEndCard:!0,videoStartTime:0}),l({pinId:a,isPromoted:!1,currentTime:0})),e.state.fullscreen&&e.exitFullscreen()),s&&s(),e.props.setPanelOpen(!0)}),ei(en(e),"handlePause",function(t){t.event.stopPropagation(),e.setState({playing:!1})}),ei(en(e),"handlePlay",function(t){t.event.stopPropagation(),e.setState({playing:!0})}),ei(en(e),"handleFullscreenChange",function(t){var n=t.event,r=t.fullscreen;n.stopPropagation(),e.setState({fullscreen:r})}),ei(en(e),"handlePlayheadDown",function(){e.setState({seeking:!0})}),ei(en(e),"handlePlayheadUp",function(){setTimeout(function(){e.setState({seeking:!1})},500)}),ei(en(e),"handleRestartVideo",function(t){t.event.stopPropagation(),e.setState({playing:!0,showEndCard:!1})}),ei(en(e),"handleShareRestartVideo",function(t){t.event.stopPropagation(),e.setState({playing:!0,showEndCard:!1})}),ei(en(e),"handleVolumeChange",function(t){var n=t.event,r=t.volume,o=e.props.shouldMute;n.stopPropagation(),o||e.setState({volume:r})}),ei(en(e),"exitFullscreen",function(){var e=window.document;(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}),ei(en(e),"requestFullscreen",function(){var t=e.props,n=t.customThumbnail,r=t.video,o=t.preferMp4,i=r.mp4,a=r.hlsv3||r.hls||null,l=(o&&i||a||{}).thumbnail,u=(0,X.j4)(n||l);u.requestFullscreen?u.requestFullscreen():u.webkitRequestFullscreen?u.webkitRequestFullscreen():u.mozRequestFullScreen?u.mozRequestFullScreen():u.msRequestFullscreen&&u.msRequestFullscreen()}),ei(en(e),"renderCloseupVideoEndCard",function(t,n,r,o){var i={backgroundImage:t,naturalHeight:n,naturalWidth:r,onRestartVideo:e.handleShareRestartVideo},a={backgroundImage:t,naturalHeight:n,naturalWidth:r,onRestartVideo:e.handleRestartVideo},l=e.props,u=l.clientTrackingParams,s=l.flyoutShareProps,c={clientTrackingParams:u,gridDescription:s?s.gridDescription:"",imageSrc:s?s.imageSrc:"",isFlyoutOpen:!!s&&s.isFlyoutOpen,onFlyoutDismiss:s?s.onFlyoutDismiss:function(){},onToggleFlyout:s?s.onToggleFlyout:function(){},pinId:s?s.pinId:"",pinKey:e.props.pin,variant:e.props.variant};return o?(0,g.jsx)(I,ee({},a)):(0,g.jsx)(A,ee(ee({},c),i))}),e}return n=[{key:"render",value:function(){var e=this,t=this.props,n=t.aspectRatio,r=t.autoplay,o=t.closeupStoryPinViewability,i=t.contextLogData,u=void 0===i?{component:179,is_closeup_video:!0,objectId:this.props.pinId,view:3,viewParameter:156}:i,c=t.customThumbnail,d=t.isPromoted,p=t.loop,f=t.objectFit,m=t.preferMp4,h=t.preload,y=t.requestContext,v=t.showControls,b=t.variant,_=t.video,P=t.captions,x=t.isDesktop,S=t.videoThumbnailStartTime,w=t.pin,O=t.pinId,j=t.setProgressInfo,E=t.progressInfo,C=t.setPanelOpen,T=t.panelOpen,A=t.setMute,I=t.isMuted,R=t.closeupWithinMasonryEnabled,M=t.maxHeight,D=t.maxWidth,L=t.onTimeChange,F=t.seekTime,z=t.roundingOverride;u.is_closeup_video=!0;var G=this.state,H=G.controls,N=G.fullscreen,U=G.playing,K=G.showEndCard,$=G.volume,J=G.videoStartTime,Y=_.hlsv3||_.hls||null;if(!Y&&!_.mp4)return null;var Q=_.mp4,et=m&&Q&&Q.url||Y&&[{type:"video/m3u8",src:Y.url}]||void 0,en=m&&Q||Y||{},er=en.height,eo=en.thumbnail,ei=en.width,ea=c||eo;return(0,g.jsxs)(a.zd,{height:R||"media-viewer"===b?"inherit":void 0,rounding:z,wash:!R&&"media-viewer"!==b||void 0,width:R||"media-viewer"===b?"inherit":void 0,willChangeTransform:!((0,k.G6)(y.userAgent.browserName)&&N),children:[K?this.renderCloseupVideoEndCard(null!=ea?ea:"",null!=er?er:1,null!=ei?ei:1,d):(0,g.jsxs)(a.iP,{accessibilityLabel:this.props.i18n.bt("Jeda atau putar video", "Pause or play video", "pin.closeup.video.tap", undefined, true),fullHeight:R||"media-viewer"===b,onMouseEnter:"hover"===v?this.handleShowControls:void 0,onMouseLeave:"hover"===v?this.handleHideControls:void 0,onTap:this.handleTouch,rounding:2,children:[(0,g.jsx)(V.Z,{playing:U,zIndexValue:99}),(0,g.jsx)(s.Z,{id:"VideoWithContextLogging",children:(0,g.jsx)(q.ZP,{aspectRatio:null!=n?n:(null!=ei?ei:1)/(null!=er?er:1),backgroundColor:R?"black":l.yc,captions:P,closeupStoryPinViewability:o,contextLogData:ee(ee({},u),{},{video_id:this.props.video.id}),hlsConfig:{startLevel:X.VS},isAutoPlay:!!r,loop:p,objectFit:f,onControlsPause:this.handlePause,onControlsPlay:this.handlePlay,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onPlay:function(){},onPlayError:function(){},onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onTimeChange:"storyPin"===b?L:function(e){var t=e.time;eu&&"number"==typeof(null==Q?void 0:Q.duration)&&Q.duration>0&&j&&eu({currentTime:t,duration:Q.duration/W.gJ},j)},onVolumeChange:this.handleVolumeChange,pin:w,pinKey:w,playing:U,poster:ea,preferMp4:m,preload:h,seekTime:F,src:et,variant:b,video:m&&Q||Y||{},videoStartTime:J||S,volume:$})})]}),(0,g.jsx)(a.xu,{onMouseEnter:"hover"===v?this.handleShowControls:void 0,onMouseLeave:"hover"===v?this.handleHideControls:void 0,children:"storyPin"!==b&&(0,g.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:ee(ee({},H?ee({},X.Ul):{}),{},{flexDirection:"column-reverse"})},display:"flex",height:X.hy,maxHeight:M,maxWidth:D,paddingX:6,position:"absolute",width:"100%",zIndex:Z.Gf,children:(0,g.jsx)(s.Z,{id:"IdeaPinVideoScrubber",children:(0,g.jsx)(B.Z,{activePageIndex:0,captionsUrl:P,handleMute:function(){e.setState({volume:+!!I}),A(!I)},handlePanelChange:function(){C&&C(!T),T&&x&&e.requestFullscreen()},handlePause:function(){e.setState({playing:!1})},handlePausePlay:function(){e.setState({playing:!U})},handlePlay:function(){e.setState({playing:!0})},handleWatchAgain:this.handleRestartVideo,inMilliseconds:!1,isMuted:I,isPanelOpen:T,isPlaying:U,isStoryPin:!1,pageCount:1,pages:[],pinId:O,progressInfo:E,showEndCard:K,showVideoControls:H,viewParameter:156})})})})]})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ea(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(i.Component);function ec(e){var t,n,r,o=e.pinKey,a=e.pinId,c=e.isPromoted,d=e.video,p=e.muted,y=e.variant,v=(0,f.Z)(el,o),b=(0,m.Z)(),_=(0,z.B)(),P=(0,M.g)(),x=(0,G.Hx)().seekTimes,S=(0,h.x4)(),w=S.clientTrackingParams,O=S.closeupWithinMasonryEnabled,j=S.isCloseupMediaViewerOpen,E=(0,l.Re)().maxWidth,C=(0,U.G)(),T=C.appUI,A=C.setCurrentVideo,I=T.videosAutoplaying,k=I.organicVideosAutoplaying,R=I.promotedVideosAutoplaying,D=_.locale.toLowerCase(),L=null!=(t=(null==(n=d.mp4)?void 0:n.captions_urls)||(null==(r=d.hlsv3)?void 0:r.captions_urls))?t:{},F=D&&L[D]||Object.values(L)[0]||"",V=(0,N.HG)(),B=c?R[a]:k[a],Z=parseInt((0,H.Z)().t||0,10),W=J((0,i.useState)((null==B?void 0:B.currentTime)||0),2),K=W[0],X=W[1],q=J((0,i.useState)(null),2),$=q[0],Y=q[1],Q=J((0,i.useState)(!0),2),et=Q[0],en=Q[1],er=J((0,i.useState)(p),2),eo=er[0],ei=er[1],ea=(0,u.Z)({pinKey:v}).maxHeight;(0,i.useEffect)(function(){var e=K;Z>0&&(e=Z),x[a]&&(e=x[a]),X(e)},[x,a,Z,K]);var eu=(0,i.useMemo)(function(){return("default"!==y||!j)&&(!B||!B.paused)},[y,B,j]);return(0,g.jsx)(s.Z,{id:"CloseupVideoInner",children:(0,g.jsx)(es,ee(ee({},e),{},{captions:String(F)||"",clientTrackingParams:w,closeupWithinMasonryEnabled:O,i18n:b,isCloseupMediaViewerOpen:j,isDesktop:V,isMuted:eo,isPanelOpen:et,isPlaying:eu,maxHeight:ea,maxWidth:"media-viewer"===y?void 0:E,panelOpen:et,pin:v,progressInfo:$,requestContext:_,seekTime:x[a],setCurrentVideo:A,setMute:ei,setPanelOpen:en,setProgressInfo:Y,storyPinStepStopwatch:P,variant:y,videoStartTime:K}))})}ei(es,"defaultProps",{loop:!1,showControls:"hover"})},974297:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t;return e&&null!=(t=[e["736x"],e["564x"],e["474x"],e["236x"]].find(function(e){return null==e?void 0:e.url}))?t:null}},607600:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(33357),o=n.n(r),i=n(603316);function a(e){if("undefined"==typeof window||!document.head)return(0,i.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"window undefined"}}),Promise.reject(Error("Window is undefined or no head on the document. Unable to load fonts"));var t=document.head,n=[];return e.forEach(function(e){e.styles.forEach(function(r){var i,a,l,u=document.querySelector("#".concat(null!=(i=e.fontFamily)?i:"","-").concat(r.name));u||((u=document.createElement("style")).setAttribute("id","".concat(null!=(a=e.fontFamily)?a:"","-").concat(r.name)),t.appendChild(u),e.format&&r.fontUrl&&u&&u.sheet&&u.sheet.insertRule('\n            @font-face {\n              font-family: "'.concat(null!=(l=e.fontFamily)?l:"",'";\n              font-style: "').concat(r.fontStyle,'";\n              font-weight: "').concat(r.fontWeight,'";\n              src: url("').concat(r.fontUrl,'") format("').concat(e.format,'");\n            }\n          '),0),n.push(new(o())(e.fontFamily,{style:r.fontStyle,weight:r.fontWeight}).load()))})}),Promise.all(n).then(function(){Promise.resolve()}).catch(function(e){(0,i.nP)("load_fonts.failure",{sampleRate:1,tags:{failure_reason:"unsuccessful load"}}),Promise.reject(e)})}},291892:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(586659),o=n(284778),i=n(382718);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["alt","children","color","elementTiming","fetchPriority","isActive","naturalHeight","naturalWidth","onLoad","src","fit","srcSet"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var c=function(e,t,n){var o=(0,r.useRef)(null),i=(0,r.useRef)(null);(0,r.useEffect)(function(){if(e!==o.current||n&&n!==i.current){o.current=null!=e?e:null;var r=document.querySelector('img[src="'.concat(e,'"]'))||null;null!=r&&r.complete&&t()}i.current=n},[e,t,n])};function d(e){var t=e.alt,n=e.children,r=e.color,a=e.elementTiming,u=e.fetchPriority,d=e.isActive,p=e.naturalHeight,f=e.naturalWidth,m=e.onLoad,h=e.src,y=e.fit,g=e.srcSet,v=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,l);return c(h,m,void 0!==d&&d),(0,i.jsx)(o.Z,s(s({},v),{},{alt:t,color:r,elementTiming:a,fetchPriority:u,fit:void 0===y?"none":y,naturalHeight:p,naturalWidth:f,onLoad:m,src:h,srcSet:g,children:n}))}},716920:function(e,t,n){n.d(t,{T:function(){return a},g:function(){return l}});var r=(0,n(658673).Z)({name:"story_pin_step",sampleRate:1}),o=r.Provider,i=r.get,a=o,l=i},281106:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(586659),o=n(20256),i=n(883817),a=n(369416),l=n(123317),u=n(382718);function s(e){var t=e.playing,n=e.zIndexValue;return(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)(a.Z,{unsafeCSS:"#story-pin-closeup-pause-play-overlay svg { filter: drop-shadow( 0px 0px 8px rgba(0,0,0,0.1));}"}),(0,u.jsx)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},"data-test-id":"story-pin-closeup-pause-play-overlay",display:"flex",id:"story-pin-closeup-pause-play-overlay",justifyContent:"center",left:!0,opacity:.8,position:"absolute",right:!0,rounding:l.yR,top:!0,zIndex:n?new o.Ry(n):i.p8,children:!t&&(0,u.jsx)(o.JO,{accessibilityLabel:"Play",color:"light",icon:"play",size:48})})]})}},181663:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(586659),o=n(20256),i=n(19585),a=n(453179),l=n(579935),u=n(123317),s=n(724084),c=n(941404),d=n(572227),p=n(647709),f=n(239728),m=n(792171),h=n(601686),y=n(382718),g=function(){},v=function(e){var t=e.accessibilityLabel,n=e.dataTestId,r=e.disable,i=e.handleTap,a=e.icon;return(0,y.jsx)(o.xu,{"data-test-id":n,opacity:r?.5:void 0,children:(0,y.jsx)(o.iP,{disabled:r,onTap:i,children:(0,y.jsx)(o.JO,{accessibilityLabel:t,color:"light",icon:a,size:16})})})};function b(e){var t,n,b,_,P,x=e.activePageIndex,S=e.handlePanelChange,w=e.handlePlay,O=e.handlePause,j=e.handlePausePlay,E=e.handleMute,C=e.handleVideoScrubbingNewPage,T=e.handleWatchAgain,A=e.inMilliseconds,I=e.isPlaying,k=e.isMuted,R=e.isPanelOpen,M=e.pages,D=e.pageCount,L=e.pinId,F=void 0===L?"":L,z=e.progressInfo,V=e.showEndCard,B=e.showVideoControls,Z=void 0!==B&&B,G=e.viewParameter,H=e.isStoryPin,N=void 0===H||H,W=e.captionsUrl,U=(0,i.Z)(),K=(z||{}).currentTime,X=(0,s.Hx)().seekTimes,q=(0,h.x4)().closeupWithinMasonryEnabled,$=(0,m.H)(),J=(0,p.HG)(),Y=$.captionsEnabled,Q=(0,d.Z)(),ee=M[x],et=(ee||k).should_mute,en=Object.keys(X).includes(F)&&X[F]?X[F]:K,er=(0,r.useMemo)(function(){return M.map(function(e){var t,n,r,o,i,l,u,s=null==(t=e.blocks)?void 0:t.find(function(e){return 3===e.block_type}),c=(null==s||null==(n=s.video)||null==(r=n.video_list)||null==(o=r.V_HLSV3_MOBILE)?void 0:o.duration)||(null==s||null==(i=s.video)||null==(l=i.video_list)||null==(u=l.V_720P)?void 0:u.duration);return c?{duration:c,isVideo:!0}:{duration:a.oN,isVideo:!1}})},[M]),eo=[{duration:(null==z?void 0:z.duration)||0,isVideo:!0}],ei=N?er:eo,ea=null==(t=(ee&&(null==(_=ee.blocks)?void 0:_[0])||{}).video)||null==(n=t.video_list)||null==(b=n.V_HLSV3_MOBILE)?void 0:b.captions_urls,el=!1;(ea&&0!==Object.keys(ea).length||(void 0===W?"":W))&&(el=!0);var eu=(0,r.useMemo)(function(){return ei.reduce(function(e,t){return e+(t.duration||0)},0)/(N?f.gJ:1)},[ei,N]),es=(0,r.useMemo)(function(){return ei.filter(function(e,t){return t<x}).reduce(function(e,t){return e+(t.duration||0)},0)/f.gJ},[ei,x]),ec=ei.length>0&&null!=(P=ei[x])&&P.isVideo?null!=K?K:0:(null!=K?K:0)*5+(null!=es?es:0),ed=U.bt("Sembunyikan teks", "Hide captions", "gestalt.video.accessibilityHideCaptionsLabel", undefined, true),ep=U.bt("Tampilkan teks", "Show captions", "gestalt.video.accessibilityShowCaptionsLabel", undefined, true);return(0,y.jsxs)(o.xu,{alignContent:"evenly",alignItems:"baseline",dangerouslySetInlineStyle:{__style:{gap:"18.5px",pointerEvents:"auto"}},direction:"column",display:"flex",justifyContent:"between",width:"100%",children:[(0,y.jsxs)(o.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:Z||!I?1:0,transition:"all .1s"}},direction:"row",display:"flex",justifyContent:"between",width:"99%",children:[(0,y.jsxs)(o.kC,{alignItems:"center",direction:"row",gap:5,children:[(0,y.jsx)(v,{accessibilityLabel:I?U.bt("Jeda", "Pause", "closeup.IdeaPinVideo.Pause", undefined, true):U.bt("Putar", "Play", "closeup.IdeaPinVideo.Play", undefined, true),dataTestId:"story-pin-closeup-".concat(I?"pause":"play"),handleTap:V&&T?T:j,icon:I?"pause":"play"}),z&&(0,y.jsx)(o.iP,{children:(0,y.jsxs)(o.xu,{"aria-label":"".concat(U.bt("Durasi video", "Video duration", "closeup.IdeaPinVideo.durationLabel", undefined, true),": ").concat((0,u.Lc)(ec)," of ").concat((0,u.Lc)(eu)),"data-test-id":"time-display",children:[(0,y.jsx)(o.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:"".concat((0,u.Lc)(ec))})," ",(0,y.jsx)(o.xu,{display:"inlineBlock",opacity:.6,children:(0,y.jsx)(o.xv,{align:"end",color:"inverse",inline:!0,overflow:"normal",size:"300",weight:"bold",children:"/ ".concat((0,u.Lc)(eu))})})]})})]}),(0,y.jsxs)(o.kC,{direction:"row",gap:5,children:[el&&(0,y.jsx)(v,{accessibilityLabel:Y?ep:ed,dataTestId:"closed-captions-button-".concat(Y?"disable":"enable"),handleTap:function(){var e=J?"desktop_pin_page":"mweb_pin_page";Y?(0,c.My)("".concat(e,".closed_captions_button.toggle_off")):(0,c.My)("".concat(e,".closed_captions_button.toggle_on")),Q({action:"click",item:"closed-captions-button"}),$.setCaptionsEnabled(!Y)},icon:Y?"captions":"captions-outline"}),(0,y.jsx)(v,{accessibilityLabel:k?U.bt("Suarakan", "Unmute", "closeup.IdeaPinVideo.unmute", undefined, true):U.bt("Senyapkan", "Mute", "closeup.IdeaPinVideo.mute", undefined, true),dataTestId:"story-pin-closeup-".concat(k?"unmute":"mute"),disable:et,handleTap:E,icon:k?"mute":"sound"}),S&&!q&&(0,y.jsx)(v,{accessibilityLabel:R?U.bt("Perbesar", "Maximize", "closeup.IdeaPinVideo.maximize", undefined, true):U.bt("Perkecil", "Minimize", "closeup.IdeaPinVideo.minimize", undefined, true),dataTestId:"story-pin-closeup-".concat(R?"maximize":"minimize"),handleTap:S||g,icon:R?"maximize":"minimize"})]})]}),(0,y.jsx)(l.ZP,{activePageCurrentTime:en,activePageIndex:x,duration:eu,handlePause:O,handlePlay:w,handleVideoScrubbingNewPage:C,inMilliseconds:A,isPlaying:I,pageCount:D,pageDurations:ei,pinId:F,progressInfo:z,shouldShowPlayhead:!0,showEndCard:V,showVideoControls:Z,videoDurations:ei,viewParameter:G})]})}},579935:function(e,t,n){n.d(t,{$:function(){return g},$E:function(){return y},ZP:function(){return P}});var r=n(586659),o=n(20256),i=n(521009),a=n(19585),l=n(453179),u=n(15667),s=n(382718);function c(e){var t=e.pillHeight,n=e.scrubberWidth;return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:y}},display:"flex",flex:"grow",height:t,overflow:"hidden",rounding:"pill",children:(0,s.jsx)(o.xu,{color:g,dangerouslySetInlineStyle:{__style:{width:n}},"data-test-id":"video-progress-bar",height:"100%",rounding:"pill"})})}var d=n(724084),p=n(647709),f=n(239728);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y="rgba(255,255,255,0.24)",g="light",v=function(){},b=function(e){var t=e.children,n=e.setHoveringChange,r=e.handleMouseDown,i=e.handleMouseLeave,l=e.handleTouchStart,u=e.playhead,c=e.isPlaying,d=e.showVideoControls,f=(0,a.Z)(),m=!(0,p.HG)();return(0,s.jsx)(o.iP,{children:(0,s.jsx)(o.xu,{ref:u,alignItems:"center","aria-label":f.bt("Bilah progres scrubber video", "Video scrubber progress bar", "ideaPin.closeupvideo.videoScrubberLabel", undefined, true),dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",touchAction:"none"}},"data-test-id":"bullet-video-progress-bar",display:"flex",flex:"grow",justifyContent:m?"center":"start",marginBottom:6*!m,minHeight:"8px",onFocus:n(!0),onMouseDown:r,onMouseLeave:i,onMouseOver:n(!0),onTouchEnd:function(e){return e.preventDefault()},onTouchStart:l,opacity:d||!c?1:0,paddingY:6*!!m,position:"relative",role:"progressbar",width:"100%",children:t})})},_=function(e){var t=e.isRTL,n=e.isSeeking,r=e.scrubberWidth;return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:t?{right:r}:{left:r}},"data-test-id":"video-progress-bar-playhead",position:"relative",children:(0,s.jsx)(o.xu,{color:g,height:4,position:"absolute",rounding:"pill",children:(0,s.jsx)(o.xu,{color:"light",dangerouslySetInlineStyle:{__style:{marginTop:n?-8:-6}},height:n?16:12,marginStart:-2,rounding:"circle",width:n?16:12})})})};function P(e){var t=e.activePageIndex,n=e.activePageCurrentTime,a=e.pageCount,h=e.progressInfo,y=e.showEndCard,P=e.duration,x=void 0===P?0:P,S=e.pageDurations,w=void 0===S?[]:S,O=e.handlePlay,j=void 0===O?v:O,E=e.handlePause,C=void 0===E?v:E,T=e.handleVideoScrubbingNewPage,A=void 0===T?v:T,I=e.inMilliseconds,k=e.videoDurations,R=void 0===k?[]:k,M=e.viewParameter,D=e.isInactiveStreamPin,L=void 0!==D&&D,F=e.isPlaying,z=void 0!==F&&F,V=e.setVideoProgress,B=e.shouldShowPlayhead,Z=void 0!==B&&B,G=e.showVideoControls,H=void 0===G||G,N=e.pinId,W=void 0===N?"":N,U=!(0,p.HG)(),K=(0,r.useRef)(null),X=(0,u.B)().isRTL,q=m((0,r.useState)(!1),2),$=q[0],J=q[1],Y=m((0,r.useState)(z),2),Q=Y[0],ee=Y[1],et=m((0,r.useState)(),2),en=et[0],er=et[1],eo=(0,i.Z)(),ei=m((0,r.useState)(!1),2),ea=ei[0],el=ei[1],eu=(0,d.RC)(),es=eu.clearSeekTime,ec=eu.updateSeekTime,ed=(0,r.useCallback)(function(e,n){if(!L&&n<=a){if(n!==t&&A(n),V){var r,o;V({currentTime:e/1e3,duration:R[n].isVideo?null!=(r=null==h?void 0:h.duration)?r:1:null!=(o=null==h?void 0:h.duration)?o:5,pinId:W})}ec(e/1e3,W)}eo({event_type:101,view_type:3,view_parameter:M,component:14302})},[t,A,L,eo,a,W,null==h?void 0:h.duration,V,ec,R,M]),ep=w.map(function(e){return"".concat((e.duration||0)/x/10,"%")}),ef=(0,r.useMemo)(function(){var e=0;return w.map(function(t){var n=t.duration+e,r={min:e,max:n};return e=n,r})},[w]),em=$?"0 1.2px":"0 1px",eh=function(e){return function(){return J(e)}},ey=(0,r.useCallback)(function(e){if(K.current){var t=K.current.getBoundingClientRect(),n=t.left,r=t.right,o=t.width,i=void 0===o?0:o,a=(X?Math.max(0,Math.min(((void 0===r?0:r)-e)/i,1)):Math.max(0,Math.min((e-(void 0===n?0:n))/i,1)))*x*1e3,l=ef.findIndex(function(e){return a>=e.min&&a<=e.max}),u=-1===l?0:l;ed(a-ef[u].min,u)}},[x,ed,ef,X]),eg=(0,r.useCallback)(function(){ea||ee(z||y),el(!0)},[ea,ee,z,y]),ev=(0,r.useCallback)(function(e){eg(),z&&C(),ey(e.pageX)},[eg,z,C,ey]),eb=(0,r.useCallback)(function(e){ea&&ey(e.pageX)},[ey,ea]),e_=(0,r.useCallback)(function(e){if(ea){e.preventDefault();var t=Array.from(e.changedTouches).find(function(e){return e.identifier===en});t&&ey(t.pageX)}},[ea,ey,en]),eP=(0,r.useCallback)(function(){eh(!1),er(void 0),el(!1),Q&&j()},[j,Q]),ex=(0,r.useCallback)(function(e){Array.from(e.changedTouches).find(function(e){return e.identifier===en})&&(eh(!1),er(void 0),el(!1),es()),Q&&j()},[es,j,Q,en]);return(0,r.useEffect)(function(){return ea&&!L&&(window.addEventListener("mousemove",eb),window.addEventListener("mouseup",eP),window.addEventListener("touchmove",e_),window.addEventListener("touchend",ex)),function(){window.removeEventListener("mousemove",eb),window.removeEventListener("mouseup",eP),window.removeEventListener("touchmove",e_),window.removeEventListener("touchend",ex)}},[eb,eP,ex,e_,L,ea,ey,Q,en]),(0,s.jsx)(b,{handleMouseDown:ev,handleMouseLeave:function(){eh(!1)},handleTouchStart:function(e){eg(),eh(!0);var t=e.changedTouches[0];er(t.identifier),ey(t.pageX)},isPlaying:z,playhead:K,setHoveringChange:eh,showVideoControls:H,children:Array(a).fill(void 0).map(function(e,r){var i,u,d=null!=(i=null==h?void 0:h.currentTime)?i:0,p=null!=(u=null==h?void 0:h.duration)?u:l.P6,m=R[r],v="".concat(null!=m&&m.isVideo&&I?Math.floor(1e4*(null!=n?n:d)/(m.duration/f.gJ))/100:d/p*100,"%");return(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{margin:em}},flex:"grow",width:ep.length===a?ep[r]:"auto",children:(0,s.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{transition:"all .1s"}},"data-test-id":"idea-pin-video-progress-bar",rounding:"pill",children:r<t||y?(0,s.jsx)(o.xu,{color:g,height:4,rounding:"pill"}):t===r&&h?(0,s.jsxs)(o.kC,{alignItems:"center",flex:"grow",children:[Z&&(H||$||ea||U)&&(0,s.jsx)(_,{isRTL:X,isSeeking:ea,scrubberWidth:v}),(0,s.jsx)(c,{pillHeight:4,scrubberWidth:v})]}):(0,s.jsx)(o.xu,{color:g,dangerouslySetInlineStyle:{__style:{opacity:.24}},height:4,rounding:"pill"})})},"".concat(W,"-").concat(r))})})}},445698:function(e,t,n){n.d(t,{BN:function(){return h},RK:function(){return m},d3:function(){return g},tq:function(){return v},xm:function(){return y}});var r=n(586659),o=n(607600),i=n(123317),a=n(543561),l=n(341742);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var f=function(e,t){var n=(0,i.pE)(e,t);return"".concat(n.y,"px ").concat(n.x,"px")},m=function(e){var t=e.alignment,n=e.verticalAlignment,r={alignItems:"flex-start",display:"flex",height:"100%",justifyContent:"start",textAlign:"left",width:"100%"};return 1===n?r.alignItems="center":2===n&&(r.alignItems="flex-end"),1===t&&(r.justifyContent="center",r.textAlign="center"),r},h=function(e){var t=e.fontSize,n=e.hexColor,r=e.highlightColor,o=e.letterSpacing,i=e.lineHeight;return p({fontSize:t,letterSpacing:o,color:n,fontFamily:e.name,margin:0,maxHeight:"100%",textShadow:!r&&n&&"#ffffff"===n.toLowerCase()?"0px 1px 4px rgba(0, 0, 0, 0.2)":void 0,wordBreak:"break-word"},r?{backgroundColor:r,borderRadius:t/5,padding:f(t,i)}:{})},y=function(e){var t=e.fontSize,n=e.hasText,r=e.highlightColor,o=e.lineHeight;return p({},r?{backgroundColor:n?r:void 0,borderRadius:t/5,padding:f(t,o)}:{})},g=function(e){var t=e.letterSpacing,n=e.lineHeight;return{fontFamily:e.name,fontGroup:"",fontOverrides:{letterSpacing:t,lineHeight:n,textTransform:!1},format:"truetype",defaultStyle:0,styles:[{name:"Regular",fontStyle:"",fontWeight:"normal",fontUrl:e.url}]}};function v(e){var t=e.hasPin,n=e.pages,u=e.limitToSingleFont,c=s((0,r.useState)(!1),2),d=c[0],p=c[1],f=s((0,r.useState)(function(){return!!t&&(0,a.X7)(n)}),2),m=f[0],h=f[1],y=function(){var e=n.reduce(function(e,t){var n,r=(null==t||null==(n=t.blocks)?void 0:n.filter(function(e){return[i.h8.PARAGRAPH,i.h8.HEADING].includes(e.type)}))||[];return u&&r.length>1&&(r=[r[0]]),r.forEach(function(t){var n,r=(null==(n=t.style)?void 0:n.font)||i.Cc.font,o=r.name,a=void 0===o?"":o;e[a]||(e[a]=r)}),e},{});if(Object.keys(e).length>0){var t=Object.keys(e).map(function(t){var n=e[t];return g({letterSpacing:n.letter_spacing,lineHeight:n.line_height,name:n.name,url:n.url})});(0,o.Z)(t),p(!0)}};return(0,l.Z)(function(){y()}),(0,l.Z)(function(){m||y()}),(0,r.useEffect)(function(){m||h((0,a.X7)(n))},[m,n]),{fontsLoaded:d,mediaDataReceived:m}}},294711:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){var t=e.currentTime,n=e.endTime,r=e.startTime;return"number"!=typeof r||"number"!=typeof n||!(r>=0)||!(n>0)||!(r<n)||r<=t&&t<=n}},543561:function(e,t,n){n.d(t,{B7:function(){return u},X7:function(){return s},n4:function(){return l}});var r=n(123317);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var l=function(e,t){var n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!(null!=e&&e.match(n))||!(null!=t&&t.match(n)))return null;for(var r=null==e?void 0:e.split("."),o=null==t?void 0:t.split("."),i=Math.max((null!=r?r:"").length,(null!=o?o:"").length),a=0;a<i;a+=1){var l,u,s,c,d=a<(null!=(l=null==r?void 0:r.length)?l:0)?parseInt(null!=(u=null==r?void 0:r[a])?u:"",10):0,p=a<(null!=(s=null==o?void 0:o.length)?s:0)?parseInt(null!=(c=null==o?void 0:o[a])?c:"",10):0;if(d<p)return -1;if(d>p)return 1}return 0},u=function(){var e;function t(e,n,r){var o=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");i(this,"start",Date.now()),i(this,"paused",!1),this.onProgress=e,this.onComplete=n,this.duration=r,this.remaining=r,"undefined"!=typeof window&&(this.intervalId=window.setInterval(function(){var e=o.paused?o.duration-o.remaining:o.duration-o.remaining+(Date.now()-o.start);o.onProgress(e/o.duration)},500),this.resume())}return e=[{key:"currentTime",value:function(){return this.duration-this.remaining}},{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=Date.now()-this.start;var e=this.duration-this.remaining;this.onProgress(e/this.duration)}},{key:"resume",value:function(){this.paused=!1,this.start=Date.now(),window.clearTimeout(this.timerId),this.timerId=window.setTimeout(this.onComplete,this.remaining)}},{key:"clear",value:function(){window.clearTimeout(this.timerId),window.clearInterval(this.intervalId)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function s(e){return e.some(function(e){var t;return(null!=(t=null==e?void 0:e.blocks)?t:[]).some(function(e){return e.type===r.h8.IMAGE&&!!e.image||e.type===r.h8.VIDEO&&(!!e.video||!!e.video_signature)})})}},644493:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){try{return decodeURIComponent(e)}catch(e){return null}}},399806:function(e,t,n){n.d(t,{Q:function(){return i},Z:function(){return a}});var r=["vHLSV3MOBILE"],o=function(){var e;return!(null!=(e=window)&&e.devicePixelRatio)||window.devicePixelRatio<=1?"1x":"2x"},i=function(){var e,t,n,r="undefined"!=typeof window?null==(e=window.navigator)||null==(t=e.connection)?void 0:t.effectiveType:void 0,i=o();return r?"4g"===r?n="40-80":(i="1x",n="0-1"):n="unknown",{downloadSpeedGroup:n,screenDimension:i}};function a(e){var t,n,o,a,l,u,s,c,d,p,f,m,h=e.vHLSV3MOBILE,y=(n=(t=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,r)).vEXP3,o=t.vEXP4,a=t.vEXP5,l=t.vEXP6,u=t.vEXP7,s=t.v720P,d=(c=i()).downloadSpeedGroup,p=c.screenDimension,({unknown:f={"1x":n,"2x":a},"0-1":f,"1-5":{"1x":o,"2x":a},"5-10":{"1x":a,"2x":a},"10-20":{"1x":l,"2x":l},"20-40":m={"1x":u,"2x":u},"40-80":m,"80_or_above":m})[d][p]||s||void 0),g=h||void 0;return y?{hlsv3:g,mp4:y}:{hlsv3:g}}},105433:function(e,t,n){n.d(t,{pb:function(){return A},nf:function(){return I},lV:function(){return k}});var r=n(586659),o=n(581722),i=n(981315),a=n.n(i),l=n(575108),u=n(729434),s=n(686319),c=n(791948),d=n(503246),p=n(991384);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach(function(t){y(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function y(e,t,n){var r;return(r=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==f(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={feature_map:Object.freeze({})},v=function(e,t){var n=h(h(h(h({},(0,p.Z)(e,t)),t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({})),t.tags?{tags:t.tags}:Object.freeze({})),t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({}));return(0,d.ZP)(e,n)?e:n},b=function(e,t){if(e=e||g,"FETCH_COMPLETE"===t.type){var n=t.payload.resource,r=t.payload.response.resource_response.data;if("AggregatedCommentFeedResource"===n||"AggregatedCommentReplyFeedResource"===n||"DidItCommentsResource"===n){var o=(r||[]).reduce(function(t,n){return t[n.id]=v(e[n.id],n),t},{});return h(h({},e),o)}if("UnifiedCommentsResource"===n&&r&&r.length>0){var i=r.filter(function(e){return"aggregatedcomment"===e.type}).reduce(function(t,n){return t[n.id]=v(e[n.id],n),t},{});return h(h({},e),i)}if("UnifiedCommentsPreviewResource"===n&&r&&r.length>0){var a=r.map(function(e){return e.aggregated_comment}).reduce(function(t,n){return n&&(t[n.id]=v(e[n.id],n)),t},{}),l=r.map(function(e){return e.creator_reply}).reduce(function(t,n){return n&&n.id&&(t[n.id]=v(e[n.id],n)),t},{});return h(h(h({},e),a),l)}if("AggregatedCommentFeaturesResource"===n&&r&&Object.keys(r).length>0)return h(h({},e),{},{feature_map:r})}else if("AGGREGATED_COMMENT_CREATED"===t.type){var u=t.payload.aggregatedComment;return u.id?h(h({},e),{},y({},u.id,u)):e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){var s=t.payload.aggregatedCommentId,c=h({},e);return delete c[s],c}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){var d=t.payload.userId;return Object.fromEntries(Object.entries(e).filter(function(e){var t;return(null==(t=e[1].user)?void 0:t.id)!==d}))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){var p,f=t.payload.data;return h(h({},e),{},y({},f.id,v(null==(p=e)?void 0:p[f.id],f)))}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){var m,b=t.payload.data,_=null==(m=e)?void 0:m[b.id],P=(null==_?void 0:_.reaction_counts[1])||0,x=y({},1,b.reaction_by_me?P+1:P-1),S=h(h({},_),{},{reaction_by_me:b.reaction_by_me,reaction_counts:x});return h(h({},e),{},y({},b.id,S))}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){var w,O=t.payload.data,j=null==(w=e)?void 0:w[O.id],E=(null==j?void 0:j.helpful_count)||0,C=O.marked_helpful_by_me?E+1:E-1,T=h(h({},j),{},{marked_helpful_by_me:O.marked_helpful_by_me,helpful_count:C});return h(h({},e),{},y({},O.id,T))}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){var A,I=t.payload.data,k=h(h({},null==(A=e)?void 0:A[I.aggregated_comment_id]),{},{highlighted_by_pin_owner:I.is_highlighted});return h(h({},e),{},y({},I.aggregated_comment_id,k))}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){var R,M=t.payload.data.featureMap;return h(h({},e),{},{feature_map:h(h({},null==(R=e)?void 0:R.feature_map),M)})}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){var D,L=t.payload,F=L.increment,z=L.id,V=null==(D=e)?void 0:D[z];if(!V)return e;var B=h(h({},V),{},{comment_count:V.comment_count+F});return h(h({},e),{},y({},z,B))}else if("DELETE_COMMENT_MENTION"===t.type){var Z,G=t.payload,H=G.aggregatedCommentId,N=G.tagged_users,W=h(h({},null==(Z=e)?void 0:Z[H]),{},{tagged_users:N});return h(h({},e),{},y({},H,W))}else if("GET_COMMENT_TRANSLATION"===t.type){var U,K=t.payload,X=K.aggregatedCommentId,q=K.translatedText,$=h(h({},null==(U=e)?void 0:U[X]),{},{translatedText:q});return h(h({},e),{},y({},X,$))}return e},_=n(382718);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,n,r,o,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(r,o)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){x(i,r,o,a,l,"next",e)}function l(e){x(i,r,o,a,l,"throw",e)}a(void 0)})}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=P(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=(0,u.Z)("AggregatedComments"),C=E.Provider,T=E.get;function A(e){var t,n=e.children,i=(0,o.v9)(function(e){var t=e.resources;return null==t?void 0:t.UnifiedCommentsResource}),a=g;i&&Object.values(i).forEach(function(e){var t,n=null==(t=e.data)?void 0:t.filter(function(e){return"aggregatedcomment"===e.type}),r=null==n?void 0:n.reduce(function(e,t){return e[t.id]=v(a[t.id],t),e},{});a=j(j({},a),r)});var l=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(b,a))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{for(i=(n=n.call(e)).next;!(u=(r=i.call(n)).done)&&(l.push(r.value),2!==l.length);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return w(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=l[0],s=l[1],d=function(e){s({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentFeaturesResource",d),(0,c.my)("AggregatedCommentFeaturesResource",d),(0,c.Z8)("AggregatedCommentFeedResource",d),(0,c.my)("AggregatedCommentFeedResource",d),(0,c.Z8)("AggregatedCommentReplyFeedResource",d),(0,c.my)("AggregatedCommentReplyFeedResource",d),(0,c.Z8)("DidItCommentsResource",d),(0,c.my)("DidItCommentsResource",d),(0,c.Z8)("UnifiedCommentsPreviewResource",d),(0,c.my)("UnifiedCommentsPreviewResource",d),(0,c.Z8)("UnifiedCommentsResource",d),(0,c.my)("UnifiedCommentsResource",d);var p=(0,r.useMemo)(function(){return{aggregatedComments:u,dispatch:s}},[u,s]);return(0,_.jsx)(C,{value:p,children:n})}function I(){var e=T().dispatch;return(0,r.useMemo)(function(){var t,n,r,o,i,u;return{aggregatedCommentCreated:function(t,n){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:n}})},aggregatedCommentDeleted:function(t,n){e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:n}})},aggregatedCommentHidden:function(t){e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:function(t){e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:(t=S(regeneratorRuntime.mark(function e(t){var n,r,o,i,a,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0===(n=t.isAggregatedComment)||n,o=t.commentId,i=t.reason,a=t.detailedReasons,l=r?"/v3/aggregated_comments/".concat(o,"/flag/"):"/v3/did_it/".concat(o,"/flag/"),e.abrupt("return",(0,s.Z)({url:l,method:"PUT",data:{commentId:o,reason:i,detailedReasons:a}}));case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),deleteCommentMention:(n=S(regeneratorRuntime.mark(function t(n){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.Z)({url:"/v3/aggregated_comments/".concat(n,"/mentions/"),method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}});case 2:e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:(o=null!=(r=t.sent.resource_response.data)?r:{}).id,tagged_users:o.tagged_users}});case 6:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)}),translateAggregatedComment:(r=S(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,s.Z)({url:"/v3/aggregated_comments/".concat(n,"/translate/"),method:"GET"});case 3:e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:n,translatedText:null!=(r=t.sent.resource_response.data)?r:""}}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:n,translatedText:""}});case 13:case"end":return t.stop()}},t,null,[[0,9]])})),function(e){return r.apply(this,arguments)}),toggleAggregatedCommentHelpful:function(t){var n=t.aggregatedCommentId,r=t.isMarkedHelpfulByMe,o=t.orbacSubjectId;(0,s.Z)({url:"/v3/helpful/1/".concat(n,"/"),method:r?"DELETE":"POST",data:o?{orbac_subject_id:o}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:n,marked_helpful_by_me:!r}}})},toggleAggregatedCommentHighlight:(o=S(regeneratorRuntime.mark(function t(n){var r,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.aggregatedCommentId,o=n.pinId,i=n.isHighlighted,a()(r,"Could not find comment"),a()(o,"Could not find Pin"),t.next=5,(0,s.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:r,pin:o,highlight:!i}});case 5:e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:r,pin_id:o,is_highlighted:!i}}});case 6:case"end":return t.stop()}},t)})),function(e){return o.apply(this,arguments)}),toggleAggregatedCommentLike:function(t){var n=t.aggregatedCommentId,r=t.isLikedByMe,o=t.orbacSubjectId;(0,s.Z)({url:"/v3/aggregated_comments/".concat(n,"/react/"),method:r?"DELETE":"POST",data:j({reaction_type:1},o?{orbac_subject_id:o}:{})}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:n,reaction_by_me:+!r}}})},updateAggregatedComment:(i=S(regeneratorRuntime.mark(function t(n){var r,o,i,a,u,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.commentId,i=n.force,a=n.orbacSubjectId,u=n.tags,s=n.text,t.next=3,l.Z.create("AggregatedCommentResource",j({commentId:o,force:i,tags:u,text:s},a?{orbacSubjectId:a}:{})).callUpdate({showError:!1});case 3:c=(null!=(r=t.sent.resource_response.data)?r:{}).tagged_users.map(function(e){return j({},e)}),e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:o,tagged_users:c,tags:JSON.parse(u),text:s}}});case 8:case"end":return t.stop()}},t)})),function(e){return i.apply(this,arguments)}),updateAggregatedCommentFeatures:(u=S(regeneratorRuntime.mark(function t(n){var r,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.userId,a={userId:o,featureMap:n.featureMap,passcode:n.passcode,user_confirm_skip_passcode:i=n.userConfirmPasscode},void 0===i&&(a.user_confirm_skip_passcode=!1),t.next=6,l.Z.create("AggregatedCommentFeaturesResource",a).callUpdate({showError:!1});case 6:e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:null!=(r=t.sent.resource_response.data)?r:Object.freeze({})}}});case 10:case"end":return t.stop()}},t)})),function(e){return u.apply(this,arguments)}),updateCommentCount:function(t,n){e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:n,id:t}})}}},[e])}function k(){return T().aggregatedComments}},807765:function(e,t,n){n.d(t,{c:function(){return d},f:function(){return c}});var r=n(586659),o=n(729434),i=n(382718);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var u=(0,o.Z)("CloseupAnimations"),s=u.Provider,c=u.get;function d(e){var t=e.children,n=a((0,r.useState)(!1),2),o=n[0],l=n[1],u=a((0,r.useState)(!1),2),c=u[0],d=u[1],p=(0,r.useMemo)(function(){return{isShowingShareButton:o,setIsShowingShareButton:l,isShowingVisualSearchButton:c,setIsShowingVisualSearchButton:d}},[o,c]);return(0,i.jsx)(s,{value:p,children:t})}},218831:function(e,t,n){n.d(t,{C:function(){return s},K:function(){return u}});var r=n(586659),o=n(382718);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=(0,r.createContext)({closeupBodyWidth:0,isCollageOverlayOpen:!1,isRelatedPins10PercentVisible:!1,setCloseupBodyWidth:function(){},setIsCollageOverlayOpen:function(){},setIsRelatedPins10PercentVisible:function(){}});function u(){var e=(0,r.useContext)(l);if(!e)throw Error("useCloseupBodyContext must be used within CloseupBodyContextProvider");return e}function s(e){var t=e.children,n=i((0,r.useState)(0),2),a=n[0],u=n[1],s=i((0,r.useState)(!1),2),c=s[0],d=s[1],p=i((0,r.useState)(!1),2),f=p[0],m=p[1],h=(0,r.useMemo)(function(){return{closeupBodyWidth:a,setCloseupBodyWidth:u,isCollageOverlayOpen:c,setIsCollageOverlayOpen:d,isRelatedPins10PercentVisible:f,setIsRelatedPins10PercentVisible:m}},[a,c,f]);return(0,o.jsx)(l,{value:h,children:t})}},85574:function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){var o,i;o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(o))in e?Object.defineProperty(e,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{Z:function(){return m}});var a={WebkitMaskImage:"-webkit-radial-gradient(white, black)"},l=function(e){return"".concat(null!=e?e:0,"px")},u=function(e){var t=e.topLeft,n=e.topRight,r=e.bottomRight,o=e.bottomLeft;return"".concat(l(t)," ").concat(l(n)," ").concat(l(r)," ").concat(l(o))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:u({topLeft:32+n,topRight:32+n,bottomRight:0,bottomLeft:0}),borderRadiusNumeric:32+n}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:u({topLeft:24+n,topRight:24+n,bottomRight:24+n,bottomLeft:24+n}),borderRadiusNumeric:24+n}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:u({topLeft:32+n,topRight:0,bottomRight:0,bottomLeft:32+n}),borderRadiusNumeric:32+n}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.additionalPadding,n=void 0===t?0:t;return{borderRadius:u({topLeft:0,topRight:32+n,bottomRight:32+n,bottomLeft:0}),borderRadiusNumeric:32+n}},f=function(e){var t=e.getterOptions,n=e.isPadded,r=e.isRTL;return n?c(t):r?p(t):d(t)};function m(e){var t=e.additionalPadding,n=e.isSideBySide,r=e.isPadded,o=e.isRTL,l=e.closeupWithinMasonryEnabled,u=e.blendedUIEnabled,d={additionalPadding:t};if(void 0!==u&&u)return{borderStyle:i(i({},a),{},{borderRadius:"unset"}),borderRadiusNumeric:0};if(void 0!==l&&l)return{borderStyle:i(i({},a),{},{borderRadius:"".concat(24,"px")}),borderRadiusNumeric:24};if(n){var p=f({isPadded:r,isRTL:o,getterOptions:d}),m=p.borderRadius,h=p.borderRadiusNumeric;return{borderStyle:i(i({},a),{},{borderRadius:m}),borderRadiusNumeric:h}}var y=(r?c:s)(d),g=y.borderRadius,v=y.borderRadiusNumeric;return{borderStyle:i(i({},a),{},{borderRadius:g}),borderRadiusNumeric:v}}},653621:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,void 0):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{GL:function(){return u},_z:function(){return a},d0:function(){return c},hO:function(){return s},pM:function(){return l}});var i,a="video",l="image",u=new Map([["DEFAULT",new Set(["button"])],["story_pin",new Set([a])],["product_detail_page",new Set(["description","shopButton","thumbnailsLoaded"])],["product_detail_page_plus",new Set(["description","shopButton","thumbnailsLoaded"])]]),s=(i=new Set,u.forEach(function(e){i=new Set([].concat(r(i),r(e)))}),i),c=new Set([].concat(r(s),[l,"resource"]))},452750:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(640785);function o(e){var t;return{defaultStyle:0,fontFamily:null!=(t=e.name)?t:"",fontGroup:r.gu,fontOverrides:{letterSpacing:e.letter_spacing,lineHeight:e.line_height},format:"truetype",id:e.id,styles:[{fontStyle:"",fontUrl:e.url,fontWeight:"normal",name:"normal"}]}}},341044:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(654262),o=n(947631);function i(e,t){(0,o.Z)(2,arguments);var n=(0,r.Z)(e),i=(0,r.Z)(t);return n.getTime()===i.getTime()}}}]);