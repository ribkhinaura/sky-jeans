"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["64701"],{358276:function(e,n,o){o.r(n);var t,r=o(586659),i=o(581722),a=o(20256),l=o(890479),u=o(374114),c=o(111330),s=o(355940),d=o(832651),v=o(19585),p=o(956077),m=o(821806),f=o(753143),b=o(572227),h=o(341742),y=o(923924),_=o(542963),S=o(441733),P=o(966838),k=o(373950),w=o(603316),g=o(78762),x=o(382718);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,n,o,t,r,i,a){try{var l=e[i](a),u=l.value}catch(e){return void o(e)}l.done?n(u):Promise.resolve(u).then(t,r)}var C=(0,g.Z)(function(){return o.e("32560").then(o.bind(o,817631))},void 0,function(e){return 817631},"PinSaveButtonCommon",function(e){return ["32560"]}),I=(0,r.lazy)((t=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([o.e("82519"),o.e("24660")]).then(o.bind(o,418581));case 2:return e.t0=e.sent.QuickSaveButtonWithExperienceAnchor,e.abrupt("return",{default:e.t0});case 4:case"end":return e.stop()}},e)}),function(){var e=this,n=arguments;return new Promise(function(o,r){var i=t.apply(e,n);function a(e){T(i,o,r,a,l,"next",e)}function l(e){T(i,o,r,a,l,"throw",e)}a(void 0)})}));n.default=function(e){var n,o,t,g=e.boardCount,T=e.clientTrackingParams,j=e.onBoardSelectionFlyoutChange,Z=e.onClickCallback,D=e.pin,A=e.showEnabledSaveBehavior,R=e.showRepinOnInitialRender,F=e.variant,Q=e.viewParameter,U=e.viewType,E=e.saveToBoardFromPostDownloadUpsell,M=e.setSaveToBoardFromPostDownloadUpsell,O=(0,d.Ow)(1000310).experience,K=(0,d.Ow)(12).experience,L=(0,b.Z)(),N=(0,i.I0)(),z=(0,v.Z)(),J=(0,r.useRef)(!1),W=(0,_.Z)(),q=W.pins,H=W.clear,V=(0,f.M0)().getItem(c.M8)||"",X=V?V===D.id:!!q&&q.length>0&&q[q.length-1].id===D.id,G=(0,S.Z)().shouldSeePinBetterSave;(0,h.Z)(function(){J.current||2!==q.length&&(1!==q.length||X)||(J.current=!0,(2===q.length&&!V&&X?[q[0]]:q).forEach(function(e){var n=e.id,o=e.nodeId;(0,u.Z)({description:"",entityId:n,link:"",promotedIsRemovable:void 0,title:""},z).then(function(e){var t=e.id,r=e.url,i=e.name;N((0,P.d)({boardId:t,url:r,title:i||"",pinId:n||"",nodeId:o}))})}),X||H())});var Y=function(){(0,f.M0)().removeItem(c.M8),H(),L({action:"trigger",item:"unauth-save-button-quicksave"}),N((0,k.Z)(!0)),N((0,P.d)({boardId:"",url:"",title:"Profile",pinId:D.id,nodeId:null==D?void 0:D.node_id})),N((0,P.X)(D))},$=function(){(0,p.Nx)("button")};if(null!=D&&null!=(n=D.pinner)&&n.blocked_by_me||null!=D&&D.promoted_is_removable)return(0,p.Nx)("button"),null;(0,w.nP)("webapp.closeup.save_button.ad_only_pin.shown",{sampleRate:1,tags:{blocked_by_me:null==D||null==(o=D.pinner)?void 0:o.blocked_by_me,promoted_is_removable:null==D?void 0:D.promoted_is_removable}});var ee=function(){var e;(0,w.nP)("webapp.closeup.save_button.ad_only_pin.clicked",{sampleRate:1,tags:{blocked_by_me:null==D||null==(e=D.pinner)?void 0:e.blocked_by_me,promoted_is_removable:null==D?void 0:D.promoted_is_removable}}),Z()};if(!G&&O&&502450===O.experience_id)return(0,x.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_QuickSaveButton",children:(0,x.jsx)(m.Z,{children:(0,x.jsx)(l.Z,{id:"QuickSaveButtonWithExperienceAnchor",children:(0,x.jsx)(I,{autoQuicksaveCallback:Y,clientTrackingParams:T,experience:O,onClickCallback:ee,onMount:$,pinKey:{type:"Legacy",data:D},saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:M,shouldAutoQuicksave:X,showEnabledSaveBehavior:A,viewParameter:Q})})})});var en=!(null!=(t=D.content_sensitivity)&&t.is_sensitive_content)&&void 0!==(void 0===g?0:g)||G,eo=[501041],et=K&&501041===K.experience_id&&K.display_data.has_tooltip?function(e){return(0,x.jsx)(d.Qp,{anchor:e,experienceIds:eo,idealDirection:"down",placementId:12,positionRelativeToAnchor:!0,showCaret:!0})}:function(e){var n,o,t;return(0,x.jsx)(d.N,{anchors:(n={},(t=function(e,n){if("object"!=B(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var t=o.call(e,n||"default");if("object"!=B(t))return t;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(o=3010,"string"),(o="symbol"==B(t)?t:t+"")in n)?Object.defineProperty(n,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[o]=e,n),idealDirection:"down",onAnchorTouch:"complete",placementId:12,scrollToDismiss:!0})};return en?(0,x.jsx)(a.xu,{children:(0,x.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinBetterSave",children:(0,x.jsx)(l.Z,{id:"PinBetterSave",children:(0,x.jsx)(y.default,{autoQuicksaveCallback:Y,clientTrackingParams:T,onClickCallback:ee,onMount:$,onToggleFlyout:j,pinKey:{type:"Legacy",data:D},renderPinSaveTooltip:et,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:M,shouldAutoQuicksave:X,variant:F,viewParameter:Q,viewType:U})})})}):(0,x.jsx)(s.Z,{name:"SafeSuspense_SaveAffordance_PinSaveButton",children:(0,x.jsx)(m.Z,{children:(0,x.jsx)(l.Z,{id:"PinSaveButton",children:(0,x.jsx)(C,{clientTrackingParams:T,isCloseupPin:!0,onClickCallback:ee,onMount:$,pinKey:{type:"Legacy",data:D},renderPinSaveTooltip:et,saveToBoardFromPostDownloadUpsell:E,setSaveToBoardFromPostDownloadUpsell:M,showRepinOnInitialRender:R})})})})}},373950:function(e,n,o){o.d(n,{Z:function(){return t}});function t(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);