"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["15583"],{716022:function(n,e,t){t.d(e,{$K:function(){return r},dh:function(){return o},ry:function(){return a},xX:function(){return l}});var o=function(n){return/instagram/i.test(n||"")},a=function(n){return o(n)||/facebook/i.test(n||"")||/line/i.test(n||"")||/wechat/i.test(n||"")},i="[Pinterest/Android]",r=function(n){return(n||"").includes("[Pinterest/iOS]")||(n||"").includes(i)},l=function(n){return(n||"").includes(i)}},469978:function(n,e,t){t.d(e,{J:function(){return u},U:function(){return v}});var o,a=t(575108),i=t(603316);function r(n,e,t,o,a,i,r){try{var l=n[i](r),u=l.value}catch(n){return void t(n)}l.done?e(u):Promise.resolve(u).then(o,a)}function l(n){return function(){var e=this,t=arguments;return new Promise(function(o,a){var i=n.apply(e,t);function l(n){r(i,o,a,l,u,"next",n)}function u(n){r(i,o,a,l,u,"throw",n)}l(void 0)})}}var u="nic_v4",c="".concat(u,"=1a"),s="".concat(u,"=1b"),d=[c,s],p=["invite_code","invite","board_invite_code","sender"],_=null,m=function(n){return!!p.find(function(e){return n.includes(e)})},f=function(n){var e;return n.pathname.includes("/pin/")&&!m(n.search)&&(e=n.search,!d.find(function(n){return e.includes(n)}))},h=(o=l(regeneratorRuntime.mark(function n(e){var t,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.Z.create("InviteSocialTrackingParamNonInviteResource",{user_id:e}).callCreate();case 2:if(!(t=n.sent.resource_response)){n.next=11;break}return o=encodeURIComponent(t.data),(0,i.nP)("".concat(u,".social_tracking_pin_non_invite.encrypted.").concat(o?"true":"false")),n.abrupt("return",o);case 11:return(0,i.nP)("".concat(u,".social_tracking_pin_non_invite.no_resource_response")),n.abrupt("return","");case 13:case"end":return n.stop()}},n)})),function(n){return o.apply(this,arguments)}),S=function(n,e,t){var o=n.search?"&":"?";return n.pathname+n.search+(o+(t?s:c)+e)},b=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;if(f(n)){var a=t?"mweb":"web";if(!e)return void(0,i.nP)("".concat(a,".").concat(u,".social_tracking_pin_non_invite.insert.no_encrypted_id"));(0,i.nP)("".concat(a,".").concat(u,".social_tracking_pin_non_invite.insert.attempt"));try{var r=S(n,e,t||!1);(0,i.nP)("".concat(a,".").concat(u,".social_tracking_pin_non_invite.insert.success")),o(r)}catch(n){(0,i.nP)("".concat(a,".").concat(u,".social_tracking_pin_non_invite.insert.caught_exception"))}}},g=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;_?b(n,_,t,o):l(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h(e);case 2:_=i=a.sent,b(n,i,t,o);case 5:case"end":return a.stop()}},a)}))()},v=function(n,e,t,o,a){var r,l=t?"mweb":"web";(0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.attempt"));try{!t&&o&&f(n)?((0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.search_string_eligible")),g(n,e,t,a)):(r=n.search,!m(r)&&!r.includes("sender")&&r.includes(u)&&(0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.search_string_land")))}catch(n){(0,i.nP)("".concat(l,".").concat(u,".social_tracking_pin_non_invite.caught_exception"))}}},527728:function(n,e,t){t.d(e,{Z:function(){return d}});var o=t(797902),a=t(469978),i=t(506662),r=t(15667),l=t(822279),u=t(152615),c=t(664897),s=t(603316);function d(){var n,e=(0,r.B)(),t=e.isBot,d=e.isSocialBot,p=e.referrerFromCookie,_=e.referrerFromHeader,m=e.countryFromHostName,f=e.countryFromIp,h=e.regionFromIp,S=e.isAuthenticated,b=(0,o.TH)(),g=(0,c.Z)(),v=new URLSearchParams(b.search),w=!t&&!!v.get("utm_pai"),y=v.get("utm_source"),O=!t&&!d&&(0,i.ey)(b),C=(0,u.Z)({countryFromHostName:m||"",countryFromIp:f||"",regionFromIp:h||"",isAuthenticated:S}),L=_||C&&p||"";n=g||!C?L:(0,l.an)(L);var I=!1,E=!t&&!d&&y&&["email",String(31)].includes(y),P=!t&&!d&&y&&["fb"].includes(y),U="offsite"===y,N=!t&&!d&&!!(n&&(/facebook/.test(n)||/fb/.test(n))),M=!t&&!d&&!!(n&&(/twitter/.test(n)||/tw/.test(n)));O&&(0,s.nP)("unauth.entry_channel.invite_code",{sampleRate:1}),E&&(0,s.nP)("unauth.entry_channel.email_utm_source",{sampleRate:1}),P&&(0,s.nP)("unauth.entry_channel.social_media_utm_source_fb",{sampleRate:1}),U&&(0,s.nP)("unauth.entry_channel.offsite_utm_source",{sampleRate:1}),N&&(0,s.nP)("unauth.entry_channel.social_media_referer_fb",{sampleRate:1}),M&&(0,s.nP)("unauth.entry_channel.social_media_referer_twitter",{sampleRate:1}),I=(0,l.Xn)(n);var k=!t&&I,x=!!v.get(a.J),T=!!v.get("twa_type")||n&&n.startsWith("android-app://com.pinterest.twa"),R=["utm_source","utm_medium","utm_campaign","utm_term","utm_content","utm_admin","utm_id","utm_mail","utm_swu"].some(function(n){return null!==v.get(n)})||!!n||x||T;return{isPaid:w,isInvite:O,utmSource:y,referrer:n,isSocial:O,isDirect:!t&&!w&&!O&&!k&&!R,isSEO:k,isBrowserStorageAllowed:C,isOffsite:U,isBot:t||d}}},822279:function(n,e,t){t.d(e,{Xn:function(){return f},Yf:function(){return v},an:function(){return h}});var o=t(506662),a=t(579275),i=t(378888),r="BING",l="GOOGLE",u="YAHOO",c="YANDEX",s="RAKUTEN",d="NAVER",p="AMP_CACHE",_="DUCKDUCKGO",m=[l,r,u,c,s,d,p,_];function f(n){return m.includes(function(n){var e=(0,i.Qc)(n,!0).hostname;if(e&&n){if(e.includes("google.")||n.includes("android-app://com.google.android.googlequicksearchbox"))return l;else if(e.includes("bing."))return r;else if(e.includes("yahoo."))return u;else if(e.includes("yandex."))return c;else if(e.includes("rakuten."))return s;else if(e.includes("naver."))return d;else if(e.includes("duckduckgo."))return _;else if(e.includes(".cdn.ampproject.org"))return p}return""}(n))}function h(n){return n||"undefined"!=typeof document&&document.referrer||""}var S=function(n){return"/"!==n[n.length-1]?"".concat(n,"/"):n},b=function(n){var e=S(n),t=(0,o.ll)({url:e});return(0,o.L6)(t)?"PIN":(0,o.am)(t)?"BOARD":(0,a.Z)(t)?"PROFILE":(0,o.bo)(t)?"TODAY":(0,o.z_)(t)?"IDEA":(0,o.R$)(t)?"SHOPPING":"UNKNOWN"},g=function(n){var e=n.selector,t=n.skipExternal,o=Array.from(document.querySelectorAll(e)),a={pin:[],board:[],user:[],today:[],idea:[],shopping:[]},i=new Set;return o.forEach(function(n){var e=n.getAttribute("href");if(!(!e||e.startsWith("#")||t&&e.startsWith("http")&&!e.includes(window.location.hostname))){var o=S(e);if(!i.has(o)){i.add(o);var r=b(o);"PIN"===r?a.pin.push(o):"BOARD"===r?a.board.push(o):"PROFILE"===r?a.user.push(o):"TODAY"===r?a.today.push(o):"IDEA"===r?a.idea.push(o):"SHOPPING"===r&&a.shopping.push(o)}}}),a},v=function(n){var e=n.country,t=n.language,o=n.isBot,a=n.hostname,i=n.pathname;return{domain:a,country:e,language:t,currentUrl:i,pageType:b(i),referrer:document.referrer,isBot:o,links:g({selector:"a[href]",skipExternal:!0})}}},838135:function(n,e,t){t.d(e,{HZ:function(){return m},ZP:function(){return L},e_:function(){return O},pT:function(){return S}});var o=t(586659),a=t(581722),i=t(121836),r=t(716022),l=t(527728),u=t(15667),c=t(238589),s=t(994174),d=t(113850),p=t(603316),_=function(){return(0,a.v9)(function(n){var e,t;return null!=(e=null==(t=n.upsell)?void 0:t.mWebSignupModal.modal.isShown)&&e})},m=function(){return(0,a.v9)(function(n){var e;return null==(e=n.upsell)?void 0:e.modal})},f=function(){return(0,a.v9)(function(n){var e,t;return null!=(e=null==(t=n.upsell)?void 0:t.mWebSignupModal.isUnauthSharingModalsShown)&&e})},h=function(){return(0,a.v9)(function(n){var e;return!!(null!=(e=n.upsell)&&e.mWebSignupModal.modalHasShown)})},S=function(){return(0,a.v9)(function(n){var e;return null==(e=n.upsell)?void 0:e.mWebSignupModal})},b=function(){var n=(0,u.B)(),e=(0,l.Z)();return(0,o.useMemo)(function(){return(0,s.T9)(n,e)},[n,e])},g=Object.freeze(["CO","ID"]),v=function(n){return g.includes(n)},w=function(n){if(!(0,r.dh)(n))return!1;var e=(0,c.Nl)();return e.getItem(i.QV)||((0,p.nP)("mobile_signup_modal.rules.suppress_for_instagram_in_app_browser"),e.setItem(i.QV,"1")),!0},y=function(n){var e=n.isUnauthSharingModalsShown,t=n.modalHasShown,o=n.sessionContext;if(!o)return!1;var a=o.country,i=o.userAgent;return e||t&&v(a)||(0,d.P)()||w(i)},O=function(n){var e=n.isModalShown,t=n.isUnauthSharingModalsShown,o=n.modalHasShown,a=n.country,i=n.userAgent;return!e&&!(t||o&&v(a)||(0,d.P)()||w(i))},C=function(){var n=_(),e=f(),t=h(),a=b();return(0,o.useCallback)(function(){return!n&&!y({isUnauthSharingModalsShown:e,modalHasShown:t,sessionContext:a})},[n,e,t,a])};function L(){return{isModalShown:_(),modal:(0,a.v9)(function(n){var e;return null==(e=n.upsell)?void 0:e.mWebSignupModal.modal}),upsellEligibleNavigationCount:(0,a.v9)(function(n){var e;return null==(e=n.upsell)?void 0:e.mWebSignupModal.upsellEligibleNavigationCount}),isUnauthSharingModalsShown:f(),modalHasShown:h(),sessionContext:b(),isUpsellEnabledGlobally:C()}}},209644:function(n,e,t){t.d(e,{ZW:function(){return v},Gk:function(){return g},YM:function(){return w}});var o=t(506662),a=t(579275),i=t(991384);function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var l="dweb_eoq_q3_standard",u="dweb_eoq_q3_advanced",c="mweb_eoq_q3_standard",s="mweb_eoq_q3_advanced",d=[{bundleId:"dweb_eoq_q3_standard",experimentKey:l,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}}}},{bundleId:"dweb_eoq_q3_advanced",experimentKey:u,active:!0,overrides:{desktop_navigational_modal_trigger:{evaluateContextOverride:{direct:{navigationalPagesViewThresholdDesktop:0},paid:{navigationalPagesViewThresholdDesktop:0},seo:{navigationalPagesViewThresholdDesktop:2}},stateOverride:{modal:{displayProps:{isWashBlocking:!0,signupFlow:{type:"login"}}}}},desktop_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"}}}}},closeup_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}},stateOverride:{modal:{displayProps:{signupFlow:{type:"login"},container:"lopDownloadUpsell",source:"lopDownloadUpsell"}}}}}},{bundleId:"mweb_eoq_q3_standard",experimentKey:c,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}}}},{bundleId:"mweb_eoq_q3_advanced",experimentKey:s,active:!0,overrides:{mobile_on_land_upsell:{evaluateContextOverride:{direct:{shouldTriggerOnLand:!0},paid:{shouldTriggerOnLand:!0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_navigation_upsell:{evaluateContextOverride:{default:{navigationalPagesViewThresholdMobile:1}},stateOverride:{mWebSignupModal:{modal:{displayProps:{allowCloseOnOutsideClick:!1}}}}},mobile_main_pin_image_modal:{evaluateContextOverride:{default:{forceShowModal:!0}}},mobile_unauth_save_quota_check:{evaluateContextOverride:{default:{mobileUnauthSaveThreshold:0}},stateOverride:{mWebSignupModal:{modal:{displayProps:{headingType:"none"}}}}},mobile_context_menu_download_button_trigger:{evaluateContextOverride:{default:{limitReached:!0}}}}}];function p(n,e){var t,o=d.filter(function(t){if(!t.active||!t.overrides[n])return!1;switch(t.experimentKey){case l:return e("dweb_eoq_q3_standard").anyEnabled;case u:return e("dweb_eoq_q3_advanced").anyEnabled;case c:return e("mweb_eoq_q3_standard").anyEnabled;case s:return e("mweb_eoq_q3_advanced").anyEnabled;default:return!1}});return null==(t=o[o.length-1])?void 0:t.overrides[n]}var _=function(n){var e,t,o,a,l,u;return{id:n.id,evaluate:(t=(e={ruleId:n.id,baseEvaluateFunction:n.evaluate}).ruleId,o=e.baseEvaluateFunction,function(n){var e,a,r=n.checkExperiment,l=n.session,u=r&&(null==(e=p(t,r))?void 0:e.evaluateContextOverride)||{},c=u[null!=(a=null==l?void 0:l.channel)?a:"default"]||u.default||{};return o((0,i.Z)(n,c))}),getNextState:(l=(a={ruleId:n.id,baseNextStateFunction:n.getNextState}).ruleId,u=a.baseNextStateFunction,function(n){var e,t=n.action,o=u({action:t,state:n.state,decision:n.decision});if(!("payload"in t&&"object"===r(t.payload)&&null!==t.payload&&"checkExperiment"in t.payload))return o;var a=(null==(e=p(l,t.payload.checkExperiment))?void 0:e.stateOverride)||{};return 0===Object.keys(a).length?o:(0,i.Z)(o,a)})}},m=t(334536);function f(n){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function h(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)}return t}function S(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?h(Object(t),!0).forEach(function(e){var o,a;o=e,a=t[e],(o=function(n){var e=function(n,e){if("object"!=f(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,e||"default");if("object"!=f(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==f(e)?e:e+""}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var b=function(n){if(!n)return!1;var e=n("mweb_feature_upsell_copy_visual_combination_v1");return["enabled_copy_1","enabled_copy_2","enabled_tone_filter_1","enabled_tone_filter_2","enabled_visual_search_1","enabled_visual_search_2","enabled_create_board_1","enabled_create_board_2"].some(function(n){return e.group===n})},g={shouldShowCloseupNavigationalModal:_({id:"closeup_navigational_modal_trigger",evaluate:function(n){var e=n.pinViewCount,t=n.navigationalPagesUpsellSeen;return(null!=e?e:0)>=4&&!t},getNextState:function(n){return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_1",container:"closeup",reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}}),shouldShowSaveModal:_({id:"save_modal_trigger",evaluate:function(){return!0},getNextState:function(n){var e=n.action,t=n.state;return S(S({},t),{},{pinSaveCount:t.pinSaveCount+1,pinId:e.payload.pinId,attributionLabel:e.payload.attributionLabel,showSaveModal:!0,modal:{isShown:!0,displayProps:{attributionLabel:e.payload.attributionLabel,container:"save",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",savePinId:e.payload.pinId,signupFlow:{type:"signup"},source:"saveButtonExp"}}})}}),shouldShowNavigationalModal:_({id:"desktop_navigational_modal_trigger",evaluate:function(n){var e=n.uniqueNavigationalPagesSeen,t=n.navigationalPagesUpsellSeen,o=n.navigationalPagesViewThresholdDesktop;return(void 0===e?[]:e).length>=(null!=o?o:4)&&!t},getNextState:function(n){var e=n.state,t=n.action;return S(S({},e),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"navigation_".concat(t.payload.containerPage),container:t.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},navigationalPagesUpsellSeen:!0})}}),shouldShowSignupModalOnCloseUpClick:_({id:"closeup_modal_trigger",evaluate:function(n){var e=n.modal,t=n.clickCloseUp;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_closeup",container:"pinWash",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickCloseUp:!0})}}),shouldShowSignupModalOnClickContextMenuSaveButton:_({id:"context_menu_save_button_trigger",evaluate:function(n){var e=n.modal,t=n.clickContextMenuSaveButton;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){var e,t,o=n.action,a=n.state;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(o.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===o.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:o.payload.pinId},S(S({},a),{},{modal:{isShown:!0,displayProps:t},clickContextMenuSaveButton:!0,pinId:null!=(e=o.payload.pinId)?e:"",attributionLabel:o.payload.attributionLabelSource})}}),shouldShowSignupModalOnClickCloseupSaveButton:_({id:"closeup_save_button_trigger",evaluate:function(n){var e=n.modal,t=n.clickCloseUpContextMenuSaveButton;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){var e,t,o=n.action,a=n.state;return t=["enabled_all_improved","enabled_all","enabled_save"].includes(o.payload.signupToLoginExpGroup)?{signupFlow:{type:"login"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"enabled_all_improved"===o.payload.signupToLoginExpGroup?"saveButton":"defaultSource"}:{signupFlow:{type:"signup"},attributionLabel:"click_context_menu_".concat(o.payload.attributionLabelSource,"_save_button"),container:"save",reason:"UPSELL_LOGIN_OR_SIGNUP",source:"saveButtonExp",savePinId:o.payload.pinId},S(S({},a),{},{modal:{isShown:!0,displayProps:t},clickCloseUpContextMenuSaveButton:!0,pinId:null!=(e=o.payload.pinId)?e:"",attributionLabel:o.payload.attributionLabelSource})}}),shouldShowSignupModalOnContextMenuDownloadClick:_({id:"desktop_context_menu_download_button_trigger",evaluate:function(n){var e=n.limitReached,t=n.inImmediateUpsellGroup,o=n.modal;return!!((e||t)&&!(null!=o&&o.isShown))},getNextState:function(n){var e,t,o=n.action,a=n.state;return t=o.payload.inDwebSwapDownloadUpsellExp?{signupFlow:{type:"login"},attributionLabel:"click_".concat(o.payload.attributionLabelSource,"_download_button"),container:"lopDownloadUpsell",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"lopDownloadUpsell"}:{signupFlow:{type:"signup"},attributionLabel:"click_".concat(o.payload.attributionLabelSource,"_download_button"),container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:o.payload.pinId},S(S({},a),{},{modal:{isShown:!0,displayProps:t},clickContextMenuDownloadButton:!0,pinId:null!=(e=o.payload.pinId)?e:"",attributionLabel:o.payload.attributionLabelSource})}}),shouldShowSignupModalOnCloseupDownloadClick:_({id:"closeup_download_button_trigger",evaluate:function(n){var e=n.limitReached,t=n.modal;return!!(e&&!(null!=t&&t.isShown))},getNextState:function(n){var e,t=n.action;return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_context_menu_".concat(t.payload.attributionLabelSource,"_download_button"),container:"download",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"downloadImageBtnUnauth",savePinId:t.payload.pinId}},clickCloseUpContextMenuDownloadButton:!0,pinId:null!=(e=t.payload.pinId)?e:"",attributionLabel:t.payload.attributionLabelSource})}}),shouldShowSignupModalOnFollowButtonClick:_({id:"follow_button_trigger",evaluate:function(n){var e=n.modal,t=n.clickFollowButton;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){var e=n.action;return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",container:e.payload.isContextualFollowEnabled?"follow":"",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:e.payload.isContextualFollowEnabled?"followButton":void 0}},clickFollowButton:!0})}}),shouldShowSignupModalOnFollowingButtonClick:_({id:"following_button_trigger",evaluate:function(n){var e=n.modal,t=n.clickFollowingButton;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_following",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowingButton:!0})}}),shouldShowSignupModalOnFollowersButtonClick:_({id:"followers_button_trigger",evaluate:function(n){var e=n.modal,t=n.clickFollowersButton;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:"click_followers",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"}},clickFollowersButton:!0})}}),shouldShowLoginModalOnCommentComposerClick:_({id:"comment_composer_trigger",evaluate:function(n){var e=n.modal,t=n.clickCommentComposerUpsell;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"tap_unauth_comment_composer",container:"closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",source:"commentComposer"}},clickCommentComposerUpsell:!0})}}),shouldShowLoginModalOnRelatedPinOpenLinkClick:_({id:"related_pin_open_link_trigger",evaluate:function(n){var e=n.modal,t=n.clickRelatedPinOpenLinkUpsell;return!(null!=e&&e.isShown)&&!t},getNextState:function(n){return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"click_context_menu_related_pin_right_click_open_link_button",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickRelatedPinOpenLinkUpsell:!0})}}),shouldShowLoginModalOnPinLinkClick:_({id:"pin_link_trigger",evaluate:function(n){var e=n.modal,t=n.pinLinkClickCount,o=void 0===t?0:t;return!(null!=e&&e.isShown)&&(2===o||o%5==0)},getNextState:function(n){var e=n.action;return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"login"},attributionLabel:"pinLinkClickHandler_tier1",container:"hybrid_clickthrough",reason:"UPSELL_LOGIN_OR_SIGNUP"}},clickPinLinkCount:e.payload.count})}}),shouldShowSocialPinLandingModal:_({id:"social_pin_landing_modal_trigger",evaluate:function(n){var e=n.inviter,t=n.socialPinLandingModalShown,o=n.checkExperiment;return!!e&&!t&&!!(null!=o&&o("ce_dweb_unauth_splp_blocking").anyEnabled||null!=o&&o("ce_dweb_unauth_splp_blocking_12s").anyEnabled)},getNextState:function(n){var e=n.action;return S(S({},n.state),{},{modal:{isShown:!0,displayProps:{signupFlow:{type:"signup"},attributionLabel:e.type===m.Fy?"delay_".concat(e.payload.containerPage):"scroll_".concat(e.payload.containerPage),container:e.payload.containerPage,reason:"UPSELL_LOGIN_OR_SIGNUP"}},socialPinLandingModalShown:!0})}})},v={shouldAllowUnauthSave:_({id:"mobile_unauth_save_quota_check",evaluate:function(n){var e=n.isPPMAndroidUnauthExperience,t=n.isFromUnauthContextMenu,o=n.currentUnauthSaves,a=n.mobileUnauthSaveThreshold;return!t&&!e&&(void 0===o?0:o)<(null!=a?a:2)},getNextState:function(n){var e,t=n.action,o=n.state;return S(S({},o),{},{mWebSignupModal:S(S({},o.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(e=o.mWebSignupModal.timesShownForSessionCount)?e:0)+1,scrollControllerHasDisplayed:o.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:t.payload.headingType,trigger:{attributionLabel:"extended_save_out_of_quota"===t.payload.headingType?"click_save_button_with_max_unauth_saves":t.payload.attributionLabel||"click_save_button_on_closeup",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:t.payload.pinId}})})}}),shouldShowMainPinImageNavigationalModal:_({id:"mobile_main_pin_image_modal",evaluate:function(n){var e=n.checkExperiment,t=n.isUpsellEnabledGlobally,o=n.isModalCurrentlyShown,a=n.learningUpsellScenario,i=n.forceShowModal,r=a&&t&&!o&&((null==e?void 0:e("mweb_unauth_main_learning_pin_full_page").anyEnabled)||(null==e?void 0:e("mweb_q2_mau_push_pc_advanced").anyEnabled)||(null==e?void 0:e("mweb_q2_mau_push_pc_advanced_row").anyEnabled)||(null==e?void 0:e("mweb_q2_mau_push_pc_emergency").anyEnabled)||(null==e?void 0:e("mweb_q2_mau_push_pc_emergency_row").anyEnabled)||(null==e?void 0:e("mweb_q2_mau_push_pc_eu_safe").anyEnabled));return a&&(i||!!r)},getNextState:function(n){var e,t,o=n.action,a=n.state;return S(S({},a),{},{mWebSignupModal:S(S({},a.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(e=null==(t=a.mWebSignupModal)?void 0:t.timesShownForSessionCount)?e:0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modal:{isShown:!0,displayProps:{headingType:"none",trigger:{attributionLabel:"navigation_main_pin_image_click",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:o.payload.pinId}})})}}),shouldShowMainPinImageAppUpsell:{id:"mobile_main_pin_app_upsell_purple_banner",getNextState:function(n){return n.state},evaluate:function(n){var e=n.learningUpsellScenario,t=n.hasConversionUpsell,o=n.isLearningAppUpsellShown;return t||!e?{shouldToggleAppUpsell:!1,currentlyShowing:!1,newState:!1}:{shouldToggleAppUpsell:!0,currentlyShowing:o,newState:!o}}},shouldShowNavigationUpsell:_({id:"mobile_navigation_upsell",evaluate:function(n){var e=n.isUpsellEnabledGlobally,t=n.isModalCurrentlyShown,o=n.newLocation,a=n.isNavigationFromSwipe,i=n.currentNavigationCount,r=n.hasSeenModal,l=n.pageThreshold,u=n.isWashDismissible,c=n.canShowSignupModalOnRouteChange,s=n.navigationalPagesViewThresholdMobile,d=n.checkExperiment,p=s||l||4;if(t)return{shouldShowModal:!1,shouldDismissModal:!0,shouldIncrementCount:!1};if(!(e&&!a)||!(o&&(null==c?void 0:c(o))))return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!1};if(!((null!=i?i:0)>=p)||r)return{shouldShowModal:!1,shouldDismissModal:!1,shouldIncrementCount:!0};var _=b(d);return{shouldShowModal:!0,shouldDismissModal:!1,shouldIncrementCount:!0,attributionLabel:"navigation_".concat(p,"_").concat(i),allowCloseOnOutsideClick:u,headingType:_?"mweb_feature_upsell_copy_visual_combination_v1":"none"}},getNextState:function(n){var e,t,o,a=n.state,i=n.decision;return S(S({},a),{},{mWebSignupModal:S(S({},a.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(e=a.mWebSignupModal.timesShownForSessionCount)?e:0)+1,scrollControllerHasDisplayed:a.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:null!=(t=null==i?void 0:i.headingType)?t:"none",trigger:{attributionLabel:null!=(o=null==i?void 0:i.attributionLabel)?o:"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!!(null!=i&&i.allowCloseOnOutsideClick)},pinId:null}})})}}),shouldShowOnLandUpsell:_({id:"mobile_on_land_upsell",evaluate:function(n){var e,t=n.checkExperiment,i=n.isUpsellEnabledGlobally,r=n.hasSeenNavUpsell,l=n.location,u=n.userAgent,c=n.showUnauthMwebSocialDefaultModalUpsell,s=n.isSocialInAppBrowser,d=n.shouldTriggerOnLand;if(!i||r||!(l&&((0,o.L6)(l)||(0,o.am)(l)||(0,a.Z)(l)||(0,o.En)(l)||(0,o.ey)(l))))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};var p=!((null==s?void 0:s(u))&&(null==t?void 0:t("mweb_unauth_social_iab_upsell_boost_experiment",{dangerouslySkipActivation:!0}).anyEnabled))&&c;if(!c&&!(void 0!==d&&d))return{shouldShowModal:!1,shouldIncrementCount:!1,modalConfig:null};var _=!p&&b(t);if("social"==(e=p?"social":_?"mweb_feature_upsell_copy_visual_combination_v1":"none")&&t){var m=t("ce_mweb_visual_plp_upsell");if(m.anyEnabled)switch(m.group){case"enabled_1":e="social_visual_1";break;case"enabled_2":e="social_visual_2";break;case"enabled_3":e="social_visual_3"}}return{shouldShowModal:!0,shouldIncrementCount:!0,showUnauthMwebSocialUpsell:p,modalConfig:{reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"navigation_0",navigationTriggeredUpsell:{newLocation:l,oldLocation:l},headingType:e}}},getNextState:function(n){var e,t,o=n.state,a=n.decision.modalConfig;return S(S({},o),{},{mWebSignupModal:S(S({},o.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(e=o.mWebSignupModal.timesShownForSessionCount)?e:0)+1,scrollControllerHasDisplayed:o.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:null==a?void 0:a.headingType,trigger:{attributionLabel:null!=(t=null==a?void 0:a.attributionLabel)?t:"",reason:"UPSELL_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0},pinId:null}})})}}),shouldShowSignupModalOnContextMenuDownloadClick:_({id:"mobile_context_menu_download_button_trigger",evaluate:function(n){var e=n.limitReached,t=n.inImmediateUpsellGroup,o=n.modal;return(e||t)&&!(null!=o&&o.isShown)},getNextState:function(n){var e,t=n.action,o=n.state,a=t.payload,i=a.inMwebDownloadCTAExp,r=a.showDownloadCloseupIcon,l=a.attributionLabelSource,u="none";u=i||r?"download_limit_reached":"none";var c={trigger:{attributionLabel:"click_".concat(l,"_download_button"),reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},headingType:u};return S(S({},o),{},{mWebSignupModal:S(S({},o.mWebSignupModal),{},{modal:{isShown:!0,displayProps:c,pinId:null!=(e=t.payload.pinId)?e:""}})})}}),shouldShowSignupModalOnFollowButtonClickMobile:_({id:"follow_button_trigger_mobile",evaluate:function(n){var e=n.mWebSignupModal;return!(null!=e&&e.modal.isShown)},getNextState:function(n){var e,t=n.action,o=n.state;return S(S({},o),{},{mWebSignupModal:S(S({},o.mWebSignupModal),{},{lastShownTime:Date.now(),timesShownForSessionCount:(null!=(e=o.mWebSignupModal.timesShownForSessionCount)?e:0)+1,scrollControllerHasDisplayed:o.mWebSignupModal.scrollControllerHasDisplayed,modalHasShown:!0,modal:{isShown:!0,displayProps:{headingType:t.payload.isContextualFollowEnabled?"follow":"none",trigger:{attributionLabel:t.payload.isIdeaPin?"click_idea_pin_follow":"click_follow",reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP"},allowCloseOnOutsideClick:!0}}})})}})},w={desktop:g,mobile:v}},334536:function(n,e,t){t.d(e,{dn:function(){return T},UA:function(){return q},jl:function(){return z},ub:function(){return ne},Ik:function(){return E},mV:function(){return x},OU:function(){return m},Gh:function(){return b},LL:function(){return n_},Li:function(){return ni},jB:function(){return $},w:function(){return nF},G5:function(){return ns},CC:function(){return nG},F8:function(){return ng},Ue:function(){return W},t:function(){return nW},h4:function(){return B},g_:function(){return K},BF:function(){return nr},rA:function(){return P},aj:function(){return nk},IS:function(){return nT},it:function(){return M},Yr:function(){return G},Vi:function(){return D},by:function(){return v},wK:function(){return Y},K7:function(){return S},GY:function(){return ny},vY:function(){return na},yC:function(){return nN},HK:function(){return y},f$:function(){return Q},qs:function(){return V},Fy:function(){return A},QG:function(){return nm},CH:function(){return nM},WE:function(){return nS},qT:function(){return w},Dk:function(){return no},Bh:function(){return j},qq:function(){return nA},$S:function(){return O},Qm:function(){return nU},Lu:function(){return J},Pp:function(){return L},Sy:function(){return nn},b9:function(){return nd},$y:function(){return _},Zr:function(){return N},sg:function(){return X},Hm:function(){return np},FV:function(){return nf},o9:function(){return nI},V9:function(){return H},AS:function(){return h},kd:function(){return U},pp:function(){return f},QA:function(){return nc},tW:function(){return nb},v2:function(){return nv},Jw:function(){return nD},w$:function(){return nt},Pu:function(){return nx},gU:function(){return nH},dL:function(){return nu},P9:function(){return C},YT:function(){return nR},pZ:function(){return nE},XE:function(){return nC},Ff:function(){return nL},tA:function(){return F},TQ:function(){return Z},gH:function(){return k},aJ:function(){return R},C5:function(){return nl},Dw:function(){return nB},Aw:function(){return nP},xY:function(){return nh},Bi:function(){return I},ap:function(){return nw},ht:function(){return nO},mX:function(){return g}});var o=t(716022),a=t(941404),i=t(838135),r=t(209644),l=function(n){var e,t,o=n.modal,a=n.mWebSignupModal,i=n.appUpsells;return!!(o.isShown||a.modal.isShown||(null==(e=i.learningUpsell)?void 0:e.isShown)||(null==(t=i.iabAppUpsell)?void 0:t.isShown))},u=t(127696),c=t(603316);function s(n){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function d(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?d(Object(t),!0).forEach(function(e){var o,a;o=e,a=t[e],(o=function(n){var e=function(n,e){if("object"!=s(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,e||"default");if("object"!=s(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==s(e)?e:e+""}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var _="PROCESS_MOBILE_NAVIGATION_CHANGE",m="SET_UPSELL_REASON",f="UPS_EVENT_PIN_VIEW",h="UPS_EVENT_PIN_SAVE",S="UPS_EVENT_DESKTOP_MODAL_SHOW",b="UPS_EVENT_DESKTOP_MODAL_DISMISSED",g="CLICK_CLOSE_UP_CONTEXT_MENU_SAVE_BUTTON",v="CLICK_CLOSE_UP_CONTEXT_MENU_DOWNLOAD_BUTTON",w="TRIGGER_SCROLL_DOWN_UPSELL",y="CLEAR_SCROLL_DOWN_UPSELL",O="CLICK_CLOSEUP_UPSELL",C="CLICK_CONTEXT_MENU_SAVE_BUTTON_UPSELL",L="CLICK_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",I="CLICK_FOLLOW_BUTTON_UPSELL",E="CLICK_FOLLOWING_BUTTON_UPSELL",P="CLICK_FOLLOWERS_BUTTON_UPSELL",U="CLICK_COMMENT_COMPOSER_UPSELL",N="CLICK_PIN_LINK_UPSELL",M="CLICK_RELATED_PIN_OPEN_LINK_UPSELL",k="RECORD_NAVIGATIONAL_PAGE",x="SET_INITIAL_SESSION_CONTEXT",T="RESET_UPSELL_TRIGGER_STATE",R="RECORD_SOCIAL_PIN_LANDING_PAGE",A="TRIGGER_SOCIAL_DELAY_MODAL",D="TRIGGER_SOCIAL_SCROLL_MODAL",G="SHOW_MOBILE_SIGNUP_MODAL",F="DISMISS_MOBILE_SIGNUP_MODAL",B="SET_MOBILE_SIGNUP_MODAL_TOP_INTEREST",W="INCREMENT_UPSELL_ELIGIBLE_NAVIGATION_COUNT",H="HIDE_UNAUTH_SHARING_MODALS",q="SHOW_UNAUTH_SHARING_MODALS",j="RESTORE_FROM_LOCAL_STORAGE",K="MAIN_PIN_IMAGE_CLICK_MOBILE",V="ON_LAND_UPSELL_MOBILE",Q="SET_LEARNING_UPSELL_VISIBILITY",Y="CLICK_MOBILE_CONTEXT_MENU_DOWNLOAD_BUTTON_UPSELL",Z="DISMISS_MOBILE_FLOATING_UPSELL",X="CLICK_FOLLOW_BUTTON_UPSELL_MOBILE",$="INCREMENT_PIN_SAVE_COUNT",J="DECREMENT_PIN_SAVE_COUNT",z="INCREMENT_UNAUTH_CREDIT_LINK_COUNT",nn="SET_UNAUTH_DOWNLOAD_COUNT",ne="UPS_EVENT_PIN_SAVE_MOBILE",nt="SET_REFERRED_APP_UPSELL_STATE",no=function(n){return{type:j,payload:{upsellEligibleNavigationCount:n}}},na=function(n){return{type:m,payload:{upsellReason:n}}},ni=function(n,e){return{type:f,payload:{pinId:n,seoUrl:e}}},nr=function(n,e){return{type:h,payload:{pinId:n,attributionLabel:e}}},nl=function(){return{type:b}},nu=function(n){return{type:S,payload:{displayProps:n}}},nc=function(){return{type:O}},ns=function(n,e,t){return{type:C,payload:{pinId:n,attributionLabelSource:e,signupToLoginExpGroup:t}}},nd=function(n,e){return{type:I,payload:{isIdeaPin:n,isContextualFollowEnabled:e}}},np=function(n,e,t,o){return{type:g,payload:{pinId:n,attributionLabelSource:e,signupToLoginExpGroup:t,checkExperiment:o}}},n_=function(n){var e=n.pinId,t=n.attributionLabelSource,o=n.downloadAllowedCallback;return function(n){var i=n.checkExperiment;return n.sessionContext,function(n,r){var c=r(),s=(0,u.H)(i,{reduxUnauthDownloadCount:c.upsell.unauthDownloadCount,dispatch:n}),d=s.limitReached,p=s.oldCount,_=s.newCount;(0,a.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:t,limitReached:d,oldCount:p,newCount:_}),n({type:v,payload:{pinId:e,attributionLabelSource:t,limitReached:d,checkExperiment:i}}),l(r().upsell)||o()}}},nm=function(n){var e=n.pinId,t=n.attributionLabelSource,o=n.inImmediateUpsellGroup,i=n.inDwebSwapDownloadUpsellExp,r=n.downloadAllowedCallback,c=n.showDownloadIconForRelatedPins,s=n.inDwebDownloadCTAExp;return function(n){var d=n.checkExperiment;return n.sessionContext,function(n,p){var _=p(),m=(0,u.H)(d,{reduxUnauthDownloadCount:_.upsell.unauthDownloadCount,dispatch:n}),f=m.limitReached,h=m.oldCount,S=m.newCount;c?(0,a.My)("dweb.unauth.action_bar.download_image",{attributionLabelSource:t,limitReached:f,oldCount:h,newCount:S}):s?(0,a.My)("dweb.unauth.download_cta.download_image",{attributionLabelSource:t}):i?(0,a.My)("dweb.unauth.swap_download_upsell.download_image",{attributionLabelSource:t}):(0,a.My)("dweb.unauth.context_menu.download_image",{attributionLabelSource:t,limitReached:f,oldCount:h,newCount:S}),n({type:L,payload:{pinId:e,attributionLabelSource:t,limitReached:f,inImmediateUpsellGroup:o,inDwebSwapDownloadUpsellExp:i,checkExperiment:d}}),l(p().upsell)||r()}}},nf=function(){return{type:E}},nh=function(){return{type:P}},nS=function(){return{type:U}},nb=function(n){return{type:N,payload:{count:n}}},ng=function(){return{type:M}},nv=function(n,e){return function(t){var o=t.checkExperiment,a=t.sessionContext;return function(t){t({type:k,payload:{pageUniqueKey:n,containerPage:e,checkExperiment:o,sessionContext:a}})}}},nw=function(n){return{type:x,payload:{sessionContext:n}}},ny=function(n,e){return{type:R,payload:{inviter:n,containerPage:e}}},nO=function(n){return function(e){var t=e.checkExperiment;return function(e){e({type:A,payload:{containerPage:n,checkExperiment:t}})}}},nC=function(n){return function(e){var t=e.checkExperiment;return function(e){e({type:D,payload:{containerPage:n,checkExperiment:t}})}}},nL=function(n){return{type:G,payload:n}},nI=function(){return{type:F}},nE=function(n){return{type:B,payload:{topInterest:n}}},nP=function(){return{type:W}},nU=function(){return{type:H}},nN=function(){return{type:q}},nM=function(n){return function(e){var t=e.checkExperiment,o=e.sessionContext;return function(e,i){e({type:_,payload:p(p({},n),{},{checkExperiment:t,sessionContext:o})}),l(i().upsell)||(0,a.My)("mweb.nav.upsell.show.".concat(n.currentNavigationCount))}}},nk=function(n){return function(e){var t=e.checkExperiment,l=e.sessionContext;return function(e,u){var s,d,p,_=u().upsell,m=l.country,f=l.userAgent,h=null==(p=r.YM.mobile.shouldShowOnLandUpsell)?void 0:p.evaluate({checkExperiment:t,isUpsellEnabledGlobally:(0,i.e_)({isModalShown:null!=(s=_.mWebSignupModal.modal.isShown)&&s,isUnauthSharingModalsShown:null!=(d=_.mWebSignupModal.isUnauthSharingModalsShown)&&d,modalHasShown:!!_.mWebSignupModal.modalHasShown,country:m,userAgent:f}),hasSeenNavUpsell:_.mWebSignupModal.modalHasShown,location:n.location,isPaid:n.isPaid,isSocial:n.isSocial,isDirect:n.isDirect,isSEO:n.isSEO,userAgent:f,showUnauthMwebSocialDefaultModalUpsell:n.showUnauthMwebSocialDefaultModalUpsell,isSocialInAppBrowser:o.ry,session:l});h.shouldShowModal&&h.modalConfig&&((0,a.My)("mweb.nav.upsell.show.0"),h.showUnauthMwebSocialUpsell&&(0,c.nP)("unauth.mweb.social.pin.upsell",{sampleRate:1}),e({type:V,payload:{decision:h,checkExperiment:t}}))}}},nx=function(n){return function(e){var t=e.checkExperiment,o=e.sessionContext;return function(e,i){var l,u,c,s=!!(null!=(l=i().upsell.appUpsells.learningUpsell)&&l.isShown),d=null==(u=r.YM.mobile.shouldShowMainPinImageNavigationalModal)?void 0:u.evaluate({checkExperiment:t,session:o,isUpsellEnabledGlobally:n.upsellContext.isUpsellEnabledGlobally(),isModalCurrentlyShown:n.upsellContext.isModalShown,learningUpsellScenario:n.learningUpsellScenario}),p=null==(c=r.YM.mobile.shouldShowMainPinImageAppUpsell)?void 0:c.evaluate({learningUpsellScenario:n.learningUpsellScenario,hasConversionUpsell:!!d,isLearningAppUpsellShown:s});d?(0,a.My)("mweb.nav.upsell.show.main_pin_image_click"):p.shouldToggleAppUpsell?p.currentlyShowing?n.trackInteraction({action:"dismiss",item:"learning-upsell"}):n.trackInteraction({action:"click",item:"learning-upsell"}):n.onImageClick(),e({type:K,payload:{conversionDecision:d,appUpsellDecision:p,checkExperiment:t,pinId:n.pinId}})}}},nT=function(n){return{type:Q,payload:{isShown:n}}},nR=function(n){var e=n.pinId,t=n.attributionLabelSource,o=n.inImmediateUpsellGroup,i=n.inMwebDownloadCTAExp,r=n.showDownloadCloseupIcon,c=n.downloadAllowedCallback;return function(n){var s=n.checkExperiment;return n.sessionContext,function(n,d){var p=d(),_=(0,u.H)(s,{reduxUnauthDownloadCount:p.upsell.unauthDownloadCount,dispatch:n}),m=_.limitReached,f=_.oldCount,h=_.newCount;i?(0,a.My)("mweb.unauth.download_cta.download_image",{attributionLabelSource:t}):r?(0,a.My)("mweb.unauth.download_closeup_icon.download_image",{attributionLabelSource:t}):(0,a.My)("mweb.unauth.context_menu.download_image",{attributionLabelSource:t,limitReached:m,oldCount:f,newCount:h}),n({type:Y,payload:{pinId:e,attributionLabelSource:t,limitReached:m,inImmediateUpsellGroup:o,inMwebDownloadCTAExp:i,showDownloadCloseupIcon:r,checkExperiment:s}}),l(d().upsell)||c()}}},nA=function(){return{type:Z}},nD=function(n,e){return{type:X,payload:{isIdeaPin:n,isContextualFollowEnabled:e}}},nG=function(){return{type:J}},nF=function(){return{type:z}},nB=function(n){return{type:nn,payload:{count:n}}},nW=function(n){return function(e){var t=e.checkExperiment;return e.sessionContext,function(e,o){var a,i=o().upsell;null!=(a=r.YM.mobile.shouldAllowUnauthSave)&&a.evaluate({checkExperiment:t,isPPMAndroidUnauthExperience:n.isPPMAndroidUnauthExperience,isFromUnauthContextMenu:n.isFromUnauthContextMenu,currentUnauthSaves:n.currentUnauthSaves})&&!i.mWebSignupModal.modal.isShown?(n.unauthSavedPinsStore.save({id:n.pinId,nodeId:n.nodeId,imageUrl:n.getPinGifOrImageSrc({imagesUrls:n.imagesUrls,embedSrc:n.embedSrc,embedType:n.embedType,excludeOriginals:!n.isBot&&!n.isSocialBot})}),e({type:$}),n.setNumUnauthSavedPins(n.numUnauthSavedPins+1),n.handleShowNavFooter(e,n.forceShowNavFooter,n.isNavBarHidden,n.setForceShowNavFooter),n.successCallback&&n.successCallback()):e({type:ne,payload:{attributionLabel:n.isFromUnauthContextMenu?n.attributionLabel||"click_save_button_on_closeup":"click_save_button_with_max_unauth_saves",headingType:n.isFromUnauthContextMenu?"save":"extended_save_out_of_quota",pinId:n.pinId,checkExperiment:t}})}}},nH=function(n){return{type:nt,payload:{isShown:n.isShown,appUpsellType:n.appUpsellType,isBlocking:n.isBlocking}}}},994174:function(n,e,t){t.d(e,{A4:function(){return l},T9:function(){return u},qo:function(){return r},y1:function(){return i}});var o=t(716022),a=t(942230),i=function(n){return n?(0,a.Z)(n.toUpperCase()):"OTHER"},r=function(n){return n.isPaid?"paid":n.isInvite?"invite":n.isSocial?"social":n.isSEO?"seo":n.utmSource?"utm_".concat(n.utmSource):"direct"},l=function(n){return n&&"string"==typeof n?(0,o.$K)(n)?"pinterest":(0,o.dh)(n)?"instagram":/wechat|micromessenger/i.test(n)?"wechat":(0,o.ry)(n)||/facebook|fbav|fban|tiktok|twitter|line/i.test(n)?"social":"none":"none"},u=function(n,e){var t,o=(null==n?void 0:n.countryFromHostName)||(null==n?void 0:n.country)||"",a=(null==n||null==(t=n.userAgent)?void 0:t.raw)||("undefined"!=typeof navigator?navigator.userAgent:"");return{country:o,userAgent:a,referrer:(null==n?void 0:n.referrerFromHeader)||(null==n?void 0:n.referrerFromCookie)||"",unauthID:(null==n?void 0:n.unauthId)||"",region:i(o),channel:r(e),iab:l(a)}}},127696:function(n,e,t){t.d(e,{H:function(){return s},Z:function(){return u}});var o=t(111330),a=t(753143),i=t(941404),r=t(334536);function l(n,e,t,o,a,i,r){try{var l=n[i](r),u=l.value}catch(n){return void t(n)}l.done?e(u):Promise.resolve(u).then(o,a)}function u(n,e){return c.apply(this,arguments)}function c(){var n;return n=regeneratorRuntime.mark(function n(e,t){var o,a,r,l,u,c,s,d,p,_,m,f,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o=e.filename,a=e.imgSrc,r=e.imageDownloadSuccessCallback,l=e.category,u=e.pinId,c=e.viewParameter,s=e.viewType,p=void 0!==(d=e.isUnauth)&&d,m=void 0===(_=e.platform)?"web":_,f=e.expName,h=e.expGroup,"undefined"!=typeof window){n.next=3;break}return n.abrupt("return",Promise.resolve());case 3:if((0,i.My)("web.download.click",{category:l||"no_category",authType:p?"unauth":"auth",platform:m,viewType:s,expName:f,expGroup:h}),t({event_type:82,object_id_str:u,view_type:s||3,view_parameter:c||139}),!(a&&document)){n.next=9;break}return n.abrupt("return",fetch(a,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then(function(n){return n.blob()}).then(function(n){var e,t,a=document.createElement("a");a.href=window.URL.createObjectURL(n),a.setAttribute("download",o&&o.replace(".","_")),a.style.display="none",null==(e=document.body)||e.appendChild(a),a.click(),null==(t=document.body)||t.removeChild(a),(0,i.My)("web.download.success",{category:l||"no_category",authType:p?"unauth":"auth",platform:m,viewType:s,expName:f,expGroup:h}),null==r||r()}).catch(function(){throw(0,i.My)("web.download.failure",{category:l||"no_category",authType:p?"unauth":"auth",platform:m,viewType:s,expName:f,expGroup:h}),Error("Download image error")}));case 9:return n.abrupt("return",Promise.resolve());case 10:case"end":return n.stop()}},n)}),(c=function(){var e=this,t=arguments;return new Promise(function(o,a){var i=n.apply(e,t);function r(n){l(i,o,a,r,u,"next",n)}function u(n){l(i,o,a,r,u,"throw",n)}r(void 0)})}).apply(this,arguments)}var s=function(n,e){var t=e||{},i=t.reduxUnauthDownloadCount,l=t.dispatch,u=(0,a.M0)();if(n("unuath_download_paywalled").anyEnabled||n("unauth_combined_download_exp").anyEnabled)return{limitReached:!0,oldCount:0,newCount:0};if(!u.accessAllowed){var c=void 0===i?0:i,s=c>=0,d=s?c:c+1;return c!==d&&l&&l((0,r.Dw)(d)),{limitReached:s,oldCount:c,newCount:d}}var p=u.getItem(o.rN)||0,_=p>=1,m=_?p:p+1;return p!==m&&(0,a.M0)().setItem(o.rN,m),{limitReached:_,oldCount:p,newCount:m}}},113850:function(n,e,t){t.d(e,{C:function(){return r},P:function(){return i}});var o=t(506662),a=t(603316),i=function(){return!1},r=function(n){(0,o.LM)(n)&&!i()&&(0,a.nP)("mobile_signup_modal.rules.suppress_for_discover_article",{flushImmediate:!0,sampleRate:1})}}}]);